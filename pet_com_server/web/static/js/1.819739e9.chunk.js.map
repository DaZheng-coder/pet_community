{"version":3,"sources":["components/EditCommonBar/index.jsx","api/index.js","api/api.js","components/Toast/notice.jsx","components/Toast/notification.jsx","components/Toast/toast.js","components/Toast/index.js","components/UserDetail/index.jsx","components/Avatar/index.jsx","components/Toast/icons.js","components/Popup/index.jsx","components/MiniLoading/index.jsx","components/DynamicItem/index.jsx","components/DividLine/index.jsx"],"names":["EditCommonBar","state","isPopup","isShowPopup","e","stopPropagation","setState","handleSendClick","content","textarea","value","body","user_id","props","app_user","_id","parent","dynamic_id","text","apiCommonCreate","then","res","update","data","console","log","this","className","onClick","popout","ref","c","name","id","cols","rows","placeholder","Component","connect","user","service","axios","create","baseURL","interceptors","request","use","config","token","localStorageGet","headers","Authorization","error","Promise","reject","response","code","window","alert","msg","apiCategories","get","apiCommodities","category","page","apiCommodity","apiUserDetail","apiUserListSome","apiRegister","post","apiUserUpdate","put","apiLogin","apiFollow","app_user_id","follow_user_id","apiCartList","apiUpdateCartList","apiCartAddCommodity","apiAddressList","apiAddAddress","apiDeleteAddress","delete","apiAddOrder","apiDynamicCreate","apiDynamicList","apiDynamicGood","apiDynamicDetail","apiDynamicMyList","apiCommonGood","common_id","apiCommonSecondDetail","apiCommonDelete","apiCommonMyList","Notice","type","aria-hidden","xlinkHref","info","success","warning","loading","Notification","transitionTime","notices","removeNotice","bind","Date","getTime","length","notice","key","getNoticeKey","every","item","push","setTimeout","duration","filter","onClose","map","timeout","createNotification","notification","div","document","createElement","appendChild","React","createRef","ReactDOM","render","addNotice","current","destroy","unmountComponentAtNode","removeChild","notificationDOM","Toast","UserDetail","userInfo","DynamicList","getUserInfo","getDynamicList","handleFollowClick","noClick","url","avatar","nanoid","username","fans","follow","dynamic","DynamicItem","notShowUser","withRouter","Avatar","isLoading","handleClick","input","click","file","isIOS","removeAttribute","handleChange","reader","FileReader","onload","target","result","resFile","dataURLtoFile","now","formData","FormData","append","method","PubSub","publish","catch","err","readAsDataURL","files","size","onChange","dom","img","src","alt","accept","capture","multiple","MiniLoading","Popup","svgSprite","shouldInjectCss","scripts","getElementsByTagName","getAttribute","__iconfont__svg__cssinject__","write","fn","addEventListener","indexOf","readyState","loadFn","removeEventListener","attachEvent","w","d","done","init","polling","documentElement","doScroll","onreadystatechange","IEContentLoaded","ready","svg","el","innerHTML","setAttribute","style","position","width","height","overflow","firstChild","parentNode","insertBefore","before","children","goods","good","isGood","includes","updateSecondCommon","handleCommonClick","isDetail","isCommon","history","handleGoodClick","toString","addSecondCommon","handleRouterPush","commonNum","avatarUrl","updatedAt","imgs","index","DividLine"],"mappings":"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","file":"static/js/1.819739e9.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Popup from '@/components/Popup'\r\nimport {apiCommonCreate} from '@/api/api'\r\nimport PubSub from 'pubsub-js'\r\nimport './index.less'\r\n\r\n class EditCommonBar extends Component {\r\n\r\n  state = {\r\n    isPopup: false\r\n  }\r\n\r\n  isShowPopup = (e) => {\r\n    e.stopPropagation()\r\n    const {isPopup} = this.state\r\n    this.setState({isPopup: !isPopup})\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {发送评论} e \r\n   */\r\n  handleSendClick = (e) => {\r\n    e.stopPropagation()\r\n    // 获取编辑内容\r\n    const content = this.textarea.value\r\n    if (content !== '') {\r\n      // 如果不为空\r\n      const body = {\r\n        user_id: this.props.app_user._id,\r\n        parent: this.props.dynamic_id,\r\n        text: content\r\n      }\r\n      apiCommonCreate(body).then(res => {\r\n        // 调用父组件的方法更新评论列表\r\n        this.props.update(res.data)\r\n      })\r\n      this.isShowPopup(e)\r\n    } else {\r\n      console.log('编辑的内容不能为空')\r\n    }\r\n    // 重置状态\r\n    this.textarea.value = ''\r\n  }\r\n\r\n  render() {\r\n    const {isPopup} = this.state\r\n    // dynamic_id\r\n    return (\r\n      <div className=\"edit-common-bar-content padding1 bg\">\r\n        <div onClick={this.isShowPopup} className=\"edit-common-bar-content-text radius05 bg-gray\">一起讨论讨论~</div>\r\n        <Popup isPopup={isPopup} popout={this.isShowPopup} >\r\n          <div className=\"bg popup-content padding1\">\r\n            <div className=\"popup-content-header flex\">\r\n              <span onClick={this.isShowPopup} className=\"popup-content-header-cancel\">取消</span>\r\n              <span className=\"font3 font-bold\">评论</span>\r\n              <span onClick={this.handleSendClick} className=\"font-blue\">发送</span>\r\n            </div>\r\n            <div>\r\n              <textarea ref={c => this.textarea = c} name=\"common\" id=\"common\" cols=\"30\" rows=\"10\" placeholder=\"请输入您评论的内容~\"></textarea>\r\n            </div>\r\n          </div>\r\n        </Popup>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(EditCommonBar)","// 封装axios\r\nimport axios from 'axios'\r\nimport QS from 'qs'\r\nimport {localStorageGet}  from '@/utils'\r\n// import Toast from ''\r\n\r\n//保存环境变量\r\n// const isPrd = process.env.NODE_ENV == 'production';\r\n//区分开发环境还是生产环境基础URL\r\n// export const basicUrl = isPrd ? process.env.REACT_APP_API_URL : 'http://localhost:3001/web/api'\r\nexport const basicUrl = 'http://pet.zhengjunqin.top/web/api'\r\n\r\n// 设置axios基本路径\r\nconst service = axios.create({\r\n  baseURL: basicUrl\r\n})\r\n\r\n// 请求拦截器\r\nservice.interceptors.request.use(config => { \r\n  const token = localStorageGet('userToken')\r\n  // 在每次的请求中添加token\r\n  // config.data = Object.assign({}, config.data, {\r\n  //   token: token,\r\n  // })\r\n  if (token) {\r\n    console.log('有token，设置token1', token)\r\n    config.headers.Authorization = 'Bearer ' + token\r\n  }\r\n  // 设置请求头\r\n  // config.headers = {\r\n  //   'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n  // }\r\n  // config.data = QS.stringify(config.data)\r\n  return config\r\n}, error => { \r\n  return Promise.reject(error);\r\n})\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(response => {\r\n  //根据返回不同的状态码做不同的事情\r\n  // 这里一定要和后台开发人员协商好统一的错误状态码\r\n  if (response.code) {\r\n    switch (response.code) {\r\n      case 200:\r\n        return response.data;\r\n      case 401:\r\n        //未登录处理方法\r\n        console.log('用户未登录')\r\n        break;\r\n      case 403:\r\n        //token过期处理方法\r\n        console.log('用户token过期')\r\n        break;\r\n      default:\r\n        // 发送错误消息\r\n        // message.error(response.data.msg)\r\n        window.alert('错误消息', response.data.msg)\r\n        console.log('错误消息', response.data.msg)\r\n    }\r\n  } else { \r\n    return response;\r\n  }\r\n})\r\n//最后把封装好的axios导出\r\nexport default service\r\n","// 统一管理接口\r\nimport service from './index'\r\n\r\n// 获取上级分类为商品的分类\r\nexport const apiCategories = () => service.get('/categories/commodity')\r\n// 获取上级分类为category的商品列表\r\nexport const apiCommodities = (category,page) => service.get(`/commodities/${category}/${page}`)\r\n// 根据id获取商品信息\r\nexport const apiCommodity = (_id) => service.get(`/commodity/${_id}`)\r\n\r\n// 获取用户详细信息\r\nexport const apiUserDetail = (user_id) => service.get(`/user/detail/${user_id}`)\r\n// 获取一些用户\r\nexport const apiUserListSome = () => service.get('/user/list/some')\r\n// 注册用户\r\nexport const apiRegister = (body) => service.post('/register', body)\r\n// 更新用户信息\r\nexport const apiUserUpdate = (user_id,body) => service.put(`/user/update/${user_id}`, body)\r\n// 登录\r\nexport const apiLogin = (body) => service.post('/login', body)\r\n// 查看是否有用户名\r\nexport const apiIsExistUsername = (body) => service.get('/isExistUsername', body)\r\n// 关注\r\nexport const apiFollow = (app_user_id, follow_user_id) => service.get(`/user/follow/add/${app_user_id}/${follow_user_id}`)\r\n\r\n// 获取购物车列表，传入的id是用户id\r\nexport const apiCartList = (_id) => service.get(`/cart/list/${_id}`)\r\n// 更新购物车列表，传入的id是用户id\r\nexport const apiUpdateCartList = (_id,body) => service.put(`/cart/list/update/${_id}`, body)\r\n// 将商品添加到购物车列表，id为用户id，body传入商品_id\r\nexport const apiCartAddCommodity = (_id, body) => service.post(`/cart/list/add/${_id}`, body)\r\n\r\n// 获取地址列表 id为用户id\r\nexport const apiAddressList = (_id) => service.get(`/address/list/${_id}`)\r\n// 添加地址\r\nexport const apiAddAddress = (body) => service.post('/address/create', body)\r\n// 删除地址，传入的是地址的id\r\nexport const apiDeleteAddress = (_id) => service.delete(`address/delete/${_id}`)\r\n\r\n// 获取订单列表，id为用户id\r\nexport const apiOrderList = (_id) => service.get(`/order/list/${_id}`)\r\n// 创建添加订单\r\nexport const apiAddOrder = (body) => service.post('/order/create', body)\r\n\r\n// 创建动态\r\nexport const apiDynamicCreate = (body) => service.post('/dynamic/create', body)\r\n// 获取动态列表，body为查询条件\r\nexport const apiDynamicList = (page) => service.get(`/dynamic/list/${page}`)\r\n// 更新动态点赞\r\nexport const apiDynamicGood = (dynamic_id, user_id) => service.get(`/dynamic/good/${dynamic_id}/${user_id}`)\r\n// 获取单个动态的详细信息\r\nexport const apiDynamicDetail = (dynamic_id) => service.get(`/dynamic/detail/${dynamic_id}`)\r\n// 获取个人动态列表\r\nexport const apiDynamicMyList = (user_id) => service.get(`dynamic/my/list/${user_id}`)\r\n\r\n// 创建评论\r\nexport const apiCommonCreate = (body) => service.post('/common/create', body)\r\n// 评论点赞\r\nexport const apiCommonGood = (user_id, common_id) => service.get(`/common/good/${user_id}/${common_id}`)\r\n// 获取次级评论详情\r\nexport const apiCommonSecondDetail = (common_id) => service.get(`/common/second/detail/${common_id}`)\r\n// 删除评论\r\nexport const apiCommonDelete = (common_id) => service.delete(`/common/delete/${common_id}`)\r\n// 获取个人发布的评论列表\r\nexport const apiCommonMyList = (user_id) => service.get(`/common/my/list/${user_id}`)\r\n\r\n","import React, { Component } from 'react'\r\n\r\nclass Notice extends Component {\r\n    render() {\r\n        const icons = {\r\n            info: 'icon-info-circle-fill',\r\n            success: 'icon-check-circle-fill',\r\n            warning: 'icon-warning-circle-fill',\r\n            error: 'icon-close-circle-fill',\r\n            loading: 'icon-loading'\r\n        }\r\n        const { type, content } = this.props\r\n        return (\r\n            <div className={`toast-notice ${type}`}>\r\n                <svg className=\"icon\" aria-hidden=\"true\">\r\n                    <use xlinkHref={`#${icons[type]}`} />\r\n                </svg>\r\n                <span>{content}</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Notice","import React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom'\r\n// import { CSSTransition, TransitionGroup } from 'react-transition-group'\r\nimport Notice from './notice'\r\n\r\nclass Notification extends Component {\r\n  constructor() {\r\n    super()\r\n    this.transitionTime = 300\r\n    this.state = { notices: [] }\r\n    this.removeNotice = this.removeNotice.bind(this)\r\n  }\r\n\r\n  getNoticeKey() {\r\n    const { notices } = this.state\r\n    return `notice-${new Date().getTime()}-${notices.length}`\r\n  }\r\n\r\n  addNotice(notice) {\r\n    const { notices } = this.state\r\n    notice.key = this.getNoticeKey()\r\n    if (notices.every(item => item.key !== notice.key)) {\r\n      if (notices.length > 0 && notices[notices.length - 1].type === 'loading') {\r\n        notices.push(notice)\r\n        setTimeout(() => {\r\n          this.setState({ notices })\r\n        }, this.transitionTime)\r\n      } else {\r\n        notices.push(notice)\r\n        this.setState({ notices })\r\n      }\r\n      if (notice.duration > 0) {\r\n        setTimeout(() => {\r\n          this.removeNotice(notice.key)\r\n        }, notice.duration)\r\n      }\r\n    }\r\n    return () => {\r\n      this.removeNotice(notice.key)\r\n    }\r\n  }\r\n\r\n  removeNotice(key) {\r\n    const { notices } = this.state\r\n    this.setState({\r\n      notices: notices.filter(notice => {\r\n        if (notice.key === key) {\r\n          if (notice.onClose) setTimeout(notice.onClose, this.transitionTime)\r\n          return false\r\n        }\r\n        return true\r\n      })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { notices } = this.state\r\n    return (\r\n      <div className=\"toast-notification\">\r\n        {notices.map(notice => (\r\n          <div\r\n            key={notice.key}\r\n            className=\"toast-notice-wrapper notice\"\r\n            timeout={this.transitionTime}\r\n          >\r\n            <Notice {...notice} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction createNotification() {\r\n  const div = document.createElement('div')\r\n  document.body.appendChild(div)\r\n  const ref = React.createRef()\r\n  ReactDOM.render(<Notification ref={ref} />, div)\r\n  return {\r\n    addNotice(notice) {\r\n      return ref.current.addNotice(notice)\r\n    },\r\n    destroy() {\r\n      ReactDOM.unmountComponentAtNode(div)\r\n      document.body.removeChild(div)\r\n    }\r\n  }\r\n}\r\n\r\nexport default createNotification()","import notificationDOM from './notification'\r\nimport './toast.css'\r\n\r\nlet notification\r\nconst notice = (type, content, duration = 2000, onClose) => {\r\n    if (!notification) notification = notificationDOM\r\n    return notification.addNotice({ type, content, duration, onClose })\r\n}\r\n\r\nexport default {\r\n    info(content, duration, onClose) {\r\n        return notice('info', content, duration, onClose)\r\n    },\r\n    success(content, duration, onClose) {\r\n        return notice('success', content, duration, onClose)\r\n    },\r\n    warning(content, duration, onClose) {\r\n        return notice('warning', content, duration, onClose)\r\n    },\r\n    error(content, duration, onClose) {\r\n        return notice('error', content, duration, onClose)\r\n    },\r\n    loading(content, duration = 0, onClose) {\r\n        return notice('loading', content, duration, onClose)\r\n    }\r\n}","import Toast from './toast'\r\nimport './icons'\r\n\r\nexport default Toast","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {nanoid} from 'nanoid'\r\nimport Avatar from '@/components/Avatar'\r\nimport {apiUserDetail,apiDynamicMyList,apiFollow} from '@/api/api'\r\nimport DynamicItem from '@/components/DynamicItem'\r\nimport './index.less'\r\n\r\nclass UserDetail extends Component {\r\n  state = {\r\n    userInfo: {},\r\n    DynamicList: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getUserInfo()\r\n    this.getDynamicList()\r\n  }\r\n\r\n  // 获取用户详细信息\r\n  getUserInfo = () => {\r\n    console.log('userDetailProps', this.props)\r\n    if (this.props._id) {\r\n      console.log('获取请求')\r\n      // 如果有传入用户id，则发送请求\r\n      apiUserDetail(this.props._id).then(res => {\r\n        console.log('获取用户信息成功', res)\r\n        this.setState({userInfo: res.data})\r\n      })\r\n    } else {\r\n      // 如果没有传入用户id,打印警告\r\n      console.log('用户详细信息UserDetail没有通过props传入用户id')\r\n    }\r\n    \r\n  }\r\n\r\n  // 获取动态列表\r\n  getDynamicList = () => {\r\n    apiDynamicMyList(this.props._id).then(res => {\r\n      console.log('获取动态列表成功', res)\r\n      this.setState({DynamicList: res.data})\r\n    })\r\n  }\r\n\r\n  // 点击关注\r\n  handleFollowClick = (e) => {\r\n    e.stopPropagation()\r\n    // 发送关注请求\r\n    apiFollow(this.props.app_user._id, this.props._id).then(res => {\r\n      console.log('关注成功', res)\r\n      this.getUserInfo()\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {userInfo,DynamicList} = this.state\r\n    console.log('userInfo', userInfo)\r\n    return (\r\n      <div onClick={(e) => e.stopPropagation()} className=\"ud-ctn\">\r\n        <div className=\"ud-ctn-title\">用户信息</div>\r\n        {/* 用户头像、用户名、id */}\r\n        <div className=\"ud-ctn-bg\">\r\n          <div className=\"ud-ctn-user-info\">\r\n            <Avatar key={nanoid()} noClick url={userInfo.avatar}/>\r\n            {/* <img className=\"ud-ctn-user-info-avatar\" url={userInfo.avatar} alt=\"头像\"/> */}\r\n            <div className=\"ud-ctn-user-info-username-a-id\">\r\n              <span className=\"font3 font-bold\">{userInfo.username}</span>\r\n              <span className=\"font-deep-gray\">ID: {userInfo._id}</span>\r\n            </div>\r\n            <div className=\"ud-ctn-user-info-follow\">\r\n              <div onClick={this.handleFollowClick} className=\"ud-ctn-user-info-follow-btn\">{\r\n                userInfo.fans && userInfo.fans.filter(item => item == this.props.app_user._id).length > 0 ? '取消关注' : '关注'\r\n              }</div>\r\n            </div>\r\n          </div>\r\n          {/* 用户动态、关注、粉丝统计 */}\r\n          <div className=\"ud-ctn-user-number\">\r\n            <div className=\"ud-ctn-user-item\">\r\n              <span className=\"font3 font-bold\">{DynamicList.length}</span>\r\n              <span>动态</span>\r\n            </div>\r\n            <div className=\"ud-ctn-user-item\">\r\n              <span className=\"font3 font-bold\">{userInfo.follow && userInfo.follow.length}</span>\r\n              <span>关注</span>\r\n            </div>\r\n            <div className=\"ud-ctn-user-item\">\r\n              <span className=\"font3 font-bold\">{userInfo.fans && userInfo.fans.length}</span>\r\n              <span>粉丝</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* 动态显示 */}\r\n        <div className=\"ud-ctn-dynamic-list\">\r\n          <div className=\"ud-ctn-dynamic-list-title\">动态</div>\r\n          {/* 动态列表显示 */}\r\n          <div className=\"ud-ctn-dynamic-list-content\">\r\n            {\r\n              DynamicList.length > 0 && DynamicList.map(dynamic => <DynamicItem key={dynamic._id} {...dynamic} notShowUser/>)\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(withRouter(UserDetail))\r\n","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {isIOS,dataURLtoFile} from '@/utils'\r\nimport MiniLoading from '@/components/MiniLoading'\r\nimport UserDetail from '@/components/UserDetail'\r\nimport PubSub from 'pubsub-js'\r\nimport {apiUserUpdate} from '@/api/api'\r\nimport axios from 'axios'\r\nimport Popup from '@/components/Popup'\r\nimport {localStorageGet} from '@/utils'\r\nimport Toast from '@/components/Toast'\r\nimport './index.less'\r\n\r\nclass Avatar extends Component {\r\n  state = {\r\n    url: this.props.url,\r\n    // 头像是否加载中\r\n    isLoading: false,\r\n    isPopup: false\r\n  }\r\n\r\n  isShowPopup = (e) => {\r\n    e.stopPropagation()\r\n    if ( localStorageGet('user') === null) {\r\n      Toast.warning('请先登录', 1500)\r\n      return \r\n    }\r\n    const {isPopup} = this.state\r\n    this.setState({isPopup: !isPopup})\r\n  }\r\n\r\n  handleClick = (e) => {\r\n    e.stopPropagation()\r\n    if (this.props.noClick) {\r\n      return \r\n    }\r\n    if (this.props.user) {\r\n      // 如果是本机用户，修改头像\r\n      this.input.click()\r\n      this.input.click()\r\n      const file = this.input\r\n      if (isIOS() && file) {\r\n        file.removeAttribute(\"capture\")\r\n      }\r\n    } else {\r\n      // 如果是其他用户，跳转到其他用户详情页\r\n      console.log('这是其他用户喔')\r\n      this.isShowPopup(e)\r\n    }\r\n  }\r\n\r\n  // 更换头像\r\n  handleChange= (e) => {\r\n    let reader = new FileReader()\r\n    reader.onload = (e) => {\r\n      // 先设置更新后的头像\r\n      this.setState({url: e.target.result})\r\n      // 设置加载中\r\n      this.setState({isLoading: true})\r\n      // 先上传头像\r\n      const resFile = dataURLtoFile(e.target.result, 'pj' + Date.now() + '.jpg')\r\n      const formData = new FormData()\r\n      formData.append('file', resFile)\r\n      axios({\r\n        method: 'POST',\r\n        url: \"http://localhost:3000/web/api/upload\",\r\n        data: formData,\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n      }).then(res => {\r\n        // 上传头像成功，更新用户信息\r\n        console.log('res.url', res.data)\r\n        const body = {\r\n          avatar: res.data\r\n        }\r\n        apiUserUpdate(this.props.app_user._id, body).then(res => {\r\n          console.log('更换头像成功')\r\n          this.setState({isLoading: false})\r\n          PubSub.publish('updateDynamicList', 'restart')\r\n        }).catch(err => {\r\n          this.setState({isLoading: false})\r\n          this.setState({url: this.props.url})\r\n        })\r\n        // this.setState\r\n      }).catch(err => {\r\n        this.setState({isLoading: false})\r\n        this.setState({url: this.props.url})\r\n      })\r\n    }\r\n    reader.readAsDataURL(this.input.files[0])\r\n  }\r\n\r\n  render() {\r\n    const {size,_id} = this.props\r\n    const {url,isLoading,isPopup} = this.state\r\n    return (\r\n      <div \r\n        className={`avatar flex-center ${size || 'normal'} ${this.props.className}`}\r\n        onClick={this.handleClick}\r\n        onChange={this.handleChange}\r\n      >\r\n        {\r\n          url ? <img ref={dom=> this.img = dom} className=\"avatar-img\" src={url} alt=\"\"/> :\r\n            <div className=\"no-avatar wh100\"></div>\r\n        }\r\n        <input ref={dom => this.input = dom} type=\"file\" id=\"file\" accept=\"image/*\" capture=\"camera\" multiple/>\r\n        <div className={`${isLoading ? '' : 'none'} avatar-loading`}>\r\n          <MiniLoading />\r\n        </div>\r\n        <Popup isPopup={isPopup} popout={this.isShowPopup}>\r\n          {isPopup && <UserDetail _id={_id}/>}\r\n        </Popup>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(withRouter(Avatar))\r\n","/* eslint-disable */\r\n(function(window){var svgSprite='<svg><symbol id=\"icon-loading\" viewBox=\"0 0 1024 1024\"><path d=\"M960 447.008q-11.008-152.992-120-261.504t-260.992-120.512q-16-0.992-27.488 9.504t-11.488 26.496q0 14.016 9.504 24.512t23.488 11.488q55.008 4 107.008 26.016 60.992 26.016 108.992 73.504t74.016 109.504q22.016 51.008 26.016 106.016 0.992 14.016 11.488 23.488t24.512 9.504q15.008 0 26.016-11.008 11.008-12 8.992-27.008z\"  ></path></symbol><symbol id=\"icon-check-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m193.5 301.7l-210.6 292c-12.7 17.7-39 17.7-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z\"  ></path></symbol><symbol id=\"icon-close-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m165.4 618.2l-66-0.3L512 563.4l-99.3 118.4-66.1 0.3c-4.4 0-8-3.5-8-8 0-1.9 0.7-3.7 1.9-5.2l130.1-155L340.5 359c-1.2-1.5-1.9-3.3-1.9-5.2 0-4.4 3.6-8 8-8l66.1 0.3L512 464.6l99.3-118.4 66-0.3c4.4 0 8 3.5 8 8 0 1.9-0.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z\"  ></path></symbol><symbol id=\"icon-info-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z\"  ></path></symbol><symbol id=\"icon-warning-circle-fill\" viewBox=\"0 0 1024 1024\"><path d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296z m32 440c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z\"  ></path></symbol></svg>';var script=function(){var scripts=document.getElementsByTagName(\"script\");return scripts[scripts.length-1]}();var shouldInjectCss=script.getAttribute(\"data-injectcss\");var ready=function(fn){if(document.addEventListener){if(~[\"complete\",\"loaded\",\"interactive\"].indexOf(document.readyState)){setTimeout(fn,0)}else{var loadFn=function(){document.removeEventListener(\"DOMContentLoaded\",loadFn,false);fn()};document.addEventListener(\"DOMContentLoaded\",loadFn,false)}}else if(document.attachEvent){IEContentLoaded(window,fn)}function IEContentLoaded(w,fn){var d=w.document,done=false,init=function(){if(!done){done=true;fn()}};var polling=function(){try{d.documentElement.doScroll(\"left\")}catch(e){setTimeout(polling,50);return}init()};polling();d.onreadystatechange=function(){if(d.readyState==\"complete\"){d.onreadystatechange=null;init()}}}};var before=function(el,target){target.parentNode.insertBefore(el,target)};var prepend=function(el,target){if(target.firstChild){before(el,target.firstChild)}else{target.appendChild(el)}};function appendSvg(){var div,svg;div=document.createElement(\"div\");div.innerHTML=svgSprite;svgSprite=null;svg=div.getElementsByTagName(\"svg\")[0];if(svg){svg.setAttribute(\"aria-hidden\",\"true\");svg.style.position=\"absolute\";svg.style.width=0;svg.style.height=0;svg.style.overflow=\"hidden\";prepend(svg,document.body)}}if(shouldInjectCss&&!window.__iconfont__svg__cssinject__){window.__iconfont__svg__cssinject__=true;try{document.write(\"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>\")}catch(e){console&&console.log(e)}}ready(appendSvg)})(window)\r\n/* eslint-enable */","import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class Popup extends Component {\r\n  render() {\r\n    const {isPopup,popout} = this.props\r\n    return (\r\n      <div onClick={() => console.log('点击了弹出层')} className={`popup-container ${isPopup ? 'visible': ''}`}>\r\n        <div onClick={popout} className={`popup-container-mask ${isPopup ? 'show' : ''}`}></div>\r\n        <div className={`popup-container-content ${isPopup ? 'popup' : ''}`}>\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class MiniLoading extends Component {\r\n  render() {\r\n    return (\r\n      <div id=\"loading2\">\r\n        <div className=\"demo2\"></div>\r\n        <div className=\"demo2\"></div>\r\n        <div className=\"demo2\"></div>\r\n        <div className=\"demo2\"></div>\r\n        <div className=\"demo2\"></div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Avatar from '@/components/Avatar/'\r\nimport EditCommonBar from '@/components/EditCommonBar/'\r\nimport DividLine from '@/components/DividLine/'\r\nimport Toast from '@/components/Toast'\r\nimport Popup from '@/components/Popup'\r\nimport './index.less'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {localStorageGet} from '@/utils'\r\nimport {apiDynamicGood,apiCommonGood, apiCommonCreate,apiFollow} from '@/api/api'\r\n\r\nclass DynamicItem extends Component {\r\n  state = {\r\n    isPopup: false,\r\n    // 点赞数\r\n    goods: this.props.dynamic ? this.props.dynamic.content.good.length : this.props.content.good.length,\r\n    isGood: this.props.content && this.props.content.good.includes(this.props.app_user._id)\r\n  }\r\n\r\n  isShowPopup = (e) => {\r\n    e.stopPropagation()\r\n    const {isPopup} = this.state\r\n    this.setState({isPopup: !isPopup})\r\n  }\r\n\r\n  // 更新二级评论列表\r\n  updateSecondCommon = (e) => {\r\n    console.log('更新二级评论')\r\n  }\r\n  \r\n  // 处理点击评论触发的事件\r\n  handleCommonClick = (e) => {\r\n    e.stopPropagation()\r\n    if (localStorageGet('user') === null) {\r\n      Toast.warning('请先登录', 1000)\r\n      return \r\n    }\r\n    if (!this.props.isDetail && !this.props.isCommon) {\r\n      // 如果不是动态详情，并且不是评论，则跳转到详情页\r\n      this.props.history.push(`/dynamicDetail/${this.props._id}`)\r\n    } else {\r\n      this.isShowPopup(e)\r\n    }\r\n  }\r\n\r\n  // 处理点击点赞触发的事件\r\n  handleGoodClick = (e) => {\r\n    e.stopPropagation()\r\n    if (  localStorageGet('user') === null) {\r\n      Toast.warning('请先登录', 1000)\r\n      return \r\n    }\r\n    // 更新点赞数，判断用户是否点赞等等\r\n    const {_id,app_user} = this.props\r\n    let {goods} = this.state\r\n    if(this.props.isCommon) {\r\n      apiCommonGood(app_user._id, _id).then(res => {\r\n        console.log('res', res)\r\n        if (res.data.good.includes(app_user._id.toString())) {\r\n          goods--\r\n          this.setState({isGood: false})\r\n        } else {\r\n          goods++\r\n          this.setState({isGood: true})\r\n        }\r\n        this.setState({goods})\r\n      })\r\n    } else {\r\n      apiDynamicGood(_id,app_user._id).then(res => {\r\n        console.log('res', res)\r\n        if (res.data.good.includes(app_user._id.toString())) {\r\n          goods--\r\n          this.setState({isGood: false})\r\n        } else {\r\n          goods++\r\n          this.setState({isGood: true})\r\n        }\r\n        this.setState({goods})\r\n      })\r\n    }\r\n  }\r\n\r\n  // 处理点击发送评论的事件\r\n  handleSendClick = (e) => {\r\n    e.stopPropagation()\r\n    if (  localStorageGet('user') === null) {\r\n      Toast.warning('请先登录', 1000)\r\n      return \r\n    }\r\n    const body = {\r\n      user_id: this.props.app_user._id,\r\n      text: this.textarea.value,\r\n      parent: this.props._id\r\n    }\r\n    apiCommonCreate(body).then(res => {\r\n      this.textarea.value = ''\r\n      // 调用common组件添加次级评论\r\n      this.props.addSecondCommon(res.data)\r\n      this.isShowPopup(e)\r\n    })\r\n  }\r\n\r\n  handleRouterPush = (e) => {\r\n    e.stopPropagation()\r\n    if (  localStorageGet('user') === null) {\r\n      Toast.warning('请先登录', 1000)\r\n      return \r\n    }\r\n    if (!this.props.isDetail) {\r\n      this.props.history.push(`/dynamicDetail/${this.props._id}`)\r\n    }\r\n  }\r\n\r\n  // 点击关注\r\n  // handleFollowClick = (e) => {\r\n  //   e.stopPropagation()\r\n  //   // 发送关注请求\r\n  //   apiFollow(this.props.app_user._id, this.props._id).then(res => {\r\n  //     console.log('关注成功', res)\r\n      \r\n  //   })\r\n  // }\r\n\r\n  render() {\r\n    const {_id,user,content,commonNum} = this.props\r\n    const {isPopup,goods,isGood} = this.state\r\n    return (\r\n      <div onClick={this.handleRouterPush} className=\" dynamic-container\">\r\n        <div className=\"dynamic-container-padding\">\r\n          <div className={`flex ${this.props.notShowUser && 'none'}`}>\r\n            <div className=\"margin1-r\">\r\n              <Avatar url={user && user.avatarUrl} _id={user._id}/>\r\n            </div>\r\n            <div className=\"flex flex1 flex-column\">\r\n              <span className=\"font3 font-bolder\">{user && user.username}</span>\r\n              <span className=\"font-gray\">{content && content.updatedAt}</span>\r\n            </div>\r\n            {/* <div onClick={this.handleFollowClick} className=\"dynamic-container-handle\">\r\n              <span className=\"dynamic-container-handle-focus\">+ 关注</span>\r\n            </div> */}\r\n          </div>\r\n          <div className=\"dynamic-container-content\">\r\n            <div>\r\n              <div className=\"dynamic-container-content-text font-bold\">{content && content.text}</div>\r\n              <div className=\"dynamic-container-content-imgs\">\r\n                {\r\n                  content && content.imgs.length > 1 ? content.imgs.map((img,index) => \r\n                    <div key={index} className=\"dynamic-container-content-imgs-item\">\r\n                      <img className=\"wh100\" src={img} alt=\"动态附图\"/>\r\n                    </div>) :\r\n                    content && content.imgs.length !== 0 &&\r\n                      <img style={{width: '60%'}} src={content.imgs[0]} alt=\"动态附图\" />\r\n                }\r\n              </div>\r\n            </div>\r\n            <div>{this.props.children}</div>\r\n            <div className=\"dynamic-container-content-handle flex margin2-t\">\r\n              {/* <div className=\"dynamic-container-content-handle-tags flex1\">\r\n                <span className=\"dynamic-container-content-handle-tag\">{content.type && `# ${content.type}`}</span>\r\n              </div> */}\r\n              <div>\r\n                <span onClick={this.handleCommonClick} className={`${this.props.isDetail && !this.props.isCommon ? 'none' : ''} margin1-r`}>\r\n                  <i className=\"iconfont icon-icon-73 margin05-r\" />\r\n                  <span className=\"width04 inline-block\">{commonNum}</span>\r\n                </span>\r\n                <span onClick={this.handleGoodClick} className=\"margin1-r\">\r\n                  <i className={`${isGood ? '' : 'none'} iconfont margin05-r icon-icon-43`} />\r\n                  <i className={`${isGood ? 'none' : ''} iconfont margin05-r icon-icon-42`} />\r\n                  <span className=\"width04 inline-block\">{goods}</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Popup isPopup={isPopup} popout={this.isShowPopup}>\r\n          <div className=\"bg popup-content padding1\">\r\n            <div className=\"popup-content-header flex\">\r\n              <span onClick={this.isShowPopup} className=\"popup-content-header-cancel\">取消</span>\r\n              <span className=\"font3 font-bold\">评论</span>\r\n              <span onClick={this.handleSendClick} className=\"font-blue\">发送</span>\r\n            </div>\r\n            <div>\r\n              <textarea ref={c => this.textarea = c} name=\"common\" id=\"common\" cols=\"30\" rows=\"10\" placeholder=\"请输入您评论的内容~\"></textarea>\r\n            </div>\r\n          </div>\r\n        </Popup>\r\n        <DividLine />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(withRouter(DynamicItem))","import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class DividLine extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"divid-line\">\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}