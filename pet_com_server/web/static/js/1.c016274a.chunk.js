(this.webpackJsonppet_com_web=this.webpackJsonppet_com_web||[]).push([[1],{117:function(t,n,e){"use strict";var c=e(1),o=e(9),s=e(10),a=e(12),i=e(11),r=e(0),u=e(18),l=e(66),d=e(49),p=(e(58),e(140),function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){var t;Object(o.a)(this,e);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(t=n.call.apply(n,[this].concat(s))).state={isPopup:!1},t.isShowPopup=function(n){n.stopPropagation();var e=t.state.isPopup;t.setState({isPopup:!e})},t.handleSendClick=function(n){n.stopPropagation();var e=t.textarea.value;if(""!==e){var c={user_id:t.props.app_user._id,parent:t.props.dynamic_id,text:e};Object(d.i)(c).then((function(n){t.props.update(n.data)})),t.isShowPopup(n)}else console.log("\u7f16\u8f91\u7684\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");t.textarea.value=""},t}return Object(s.a)(e,[{key:"render",value:function(){var t=this,n=this.state.isPopup;return Object(c.jsxs)("div",{className:"edit-common-bar-content padding1 bg",children:[Object(c.jsx)("div",{onClick:this.isShowPopup,className:"edit-common-bar-content-text radius05 bg-gray",children:"\u4e00\u8d77\u8ba8\u8bba\u8ba8\u8bba~"}),Object(c.jsx)(l.a,{isPopup:n,popout:this.isShowPopup,children:Object(c.jsxs)("div",{className:"bg popup-content padding1",children:[Object(c.jsxs)("div",{className:"popup-content-header flex",children:[Object(c.jsx)("span",{onClick:this.isShowPopup,className:"popup-content-header-cancel",children:"\u53d6\u6d88"}),Object(c.jsx)("span",{className:"font3 font-bold",children:"\u8bc4\u8bba"}),Object(c.jsx)("span",{onClick:this.handleSendClick,className:"font-blue",children:"\u53d1\u9001"})]}),Object(c.jsx)("div",{children:Object(c.jsx)("textarea",{ref:function(n){return t.textarea=n},name:"common",id:"common",cols:"30",rows:"10",placeholder:"\u8bf7\u8f93\u5165\u60a8\u8bc4\u8bba\u7684\u5185\u5bb9~"})})]})})]})}}]),e}(r.Component));n.a=Object(u.b)((function(t){return{app_user:t.user}}))(p)},140:function(t,n,e){},141:function(t,n,e){},142:function(t,n,e){},143:function(t,n,e){},144:function(t,n,e){},49:function(t,n,e){"use strict";e.d(n,"f",(function(){return r})),e.d(n,"g",(function(){return u})),e.d(n,"h",(function(){return l})),e.d(n,"x",(function(){return d})),e.d(n,"y",(function(){return p})),e.d(n,"v",(function(){return j})),e.d(n,"z",(function(){return f})),e.d(n,"u",(function(){return m})),e.d(n,"t",(function(){return h})),e.d(n,"e",(function(){return b})),e.d(n,"w",(function(){return O})),e.d(n,"d",(function(){return g})),e.d(n,"c",(function(){return v})),e.d(n,"a",(function(){return x})),e.d(n,"n",(function(){return N})),e.d(n,"b",(function(){return y})),e.d(n,"o",(function(){return k})),e.d(n,"r",(function(){return w})),e.d(n,"q",(function(){return C})),e.d(n,"p",(function(){return P})),e.d(n,"s",(function(){return S})),e.d(n,"i",(function(){return _})),e.d(n,"k",(function(){return D})),e.d(n,"m",(function(){return L})),e.d(n,"j",(function(){return U})),e.d(n,"l",(function(){return A}));var c=e(59),o=e.n(c),s=(e(62),e(17)),a=o.a.create({baseURL:"http://\u751f\u4ea7\u73af\u5883:3000/web/api"});a.interceptors.request.use((function(t){var n=Object(s.c)("userToken");return n&&(console.log("\u6709token\uff0c\u8bbe\u7f6etoken1",n),t.headers.Authorization="Bearer "+n),t}),(function(t){return Promise.reject(t)})),a.interceptors.response.use((function(t){if(!t.code)return t;switch(t.code){case 200:return t.data;case 401:console.log("\u7528\u6237\u672a\u767b\u5f55");break;case 403:console.log("\u7528\u6237token\u8fc7\u671f");break;default:window.alert("\u9519\u8bef\u6d88\u606f",t.data.msg),console.log("\u9519\u8bef\u6d88\u606f",t.data.msg)}}));var i=a,r=function(){return i.get("/categories/commodity")},u=function(t,n){return i.get("/commodities/".concat(t,"/").concat(n))},l=function(t){return i.get("/commodity/".concat(t))},d=function(t){return i.get("/user/detail/".concat(t))},p=function(){return i.get("/user/list/some")},j=function(t){return i.post("/register",t)},f=function(t,n){return i.put("/user/update/".concat(t),n)},m=function(t){return i.post("/login",t)},h=function(t,n){return i.get("/user/follow/add/".concat(t,"/").concat(n))},b=function(t){return i.get("/cart/list/".concat(t))},O=function(t,n){return i.put("/cart/list/update/".concat(t),n)},g=function(t,n){return i.post("/cart/list/add/".concat(t),n)},v=function(t){return i.get("/address/list/".concat(t))},x=function(t){return i.post("/address/create",t)},N=function(t){return i.delete("address/delete/".concat(t))},y=function(t){return i.post("/order/create",t)},k=function(t){return i.post("/dynamic/create",t)},w=function(t){return i.get("/dynamic/list/".concat(t))},C=function(t,n){return i.get("/dynamic/good/".concat(t,"/").concat(n))},P=function(t){return i.get("/dynamic/detail/".concat(t))},S=function(t){return i.get("dynamic/my/list/".concat(t))},_=function(t){return i.post("/common/create",t)},D=function(t,n){return i.get("/common/good/".concat(t,"/").concat(n))},L=function(t){return i.get("/common/second/detail/".concat(t))},U=function(t){return i.delete("/common/delete/".concat(t))},A=function(t){return i.get("/common/my/list/".concat(t))}},63:function(t,n,e){"use strict";var c=e(1),o=e(9),s=e(10),a=e(12),i=e(11),r=e(0),u=e(18),l=e(3),d=e(17),p=e(70),j=e(52),f=e(65),m=e(49),h=e(82),b=(e(143),function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){var t;Object(o.a)(this,e);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(t=n.call.apply(n,[this].concat(s))).state={userInfo:{},DynamicList:[]},t.getUserInfo=function(){console.log("userDetailProps",t.props),t.props._id?(console.log("\u83b7\u53d6\u8bf7\u6c42"),Object(m.x)(t.props._id).then((function(n){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f",n),t.setState({userInfo:n.data})}))):console.log("\u7528\u6237\u8be6\u7ec6\u4fe1\u606fUserDetail\u6ca1\u6709\u901a\u8fc7props\u4f20\u5165\u7528\u6237id")},t.getDynamicList=function(){Object(m.s)(t.props._id).then((function(n){console.log("\u83b7\u53d6\u52a8\u6001\u5217\u8868\u6210\u529f",n),t.setState({DynamicList:n.data})}))},t.handleFollowClick=function(n){n.stopPropagation(),Object(m.t)(t.props.app_user._id,t.props._id).then((function(n){console.log("\u5173\u6ce8\u6210\u529f",n),t.getUserInfo()}))},t}return Object(s.a)(e,[{key:"componentDidMount",value:function(){this.getUserInfo(),this.getDynamicList()}},{key:"render",value:function(){var t=this,n=this.state,e=n.userInfo,o=n.DynamicList;return console.log("userInfo",e),Object(c.jsxs)("div",{onClick:function(t){return t.stopPropagation()},className:"ud-ctn",children:[Object(c.jsx)("div",{className:"ud-ctn-title",children:"\u7528\u6237\u4fe1\u606f"}),Object(c.jsxs)("div",{className:"ud-ctn-bg",children:[Object(c.jsxs)("div",{className:"ud-ctn-user-info",children:[Object(c.jsx)(w,{noClick:!0,url:e.avatar},Object(f.a)()),Object(c.jsxs)("div",{className:"ud-ctn-user-info-username-a-id",children:[Object(c.jsx)("span",{className:"font3 font-bold",children:e.username}),Object(c.jsxs)("span",{className:"font-deep-gray",children:["ID: ",e._id]})]}),Object(c.jsx)("div",{className:"ud-ctn-user-info-follow",children:Object(c.jsx)("div",{onClick:this.handleFollowClick,className:"ud-ctn-user-info-follow-btn",children:e.fans&&e.fans.filter((function(n){return n==t.props.app_user._id})).length>0?"\u53d6\u6d88\u5173\u6ce8":"\u5173\u6ce8"})})]}),Object(c.jsxs)("div",{className:"ud-ctn-user-number",children:[Object(c.jsxs)("div",{className:"ud-ctn-user-item",children:[Object(c.jsx)("span",{className:"font3 font-bold",children:o.length}),Object(c.jsx)("span",{children:"\u52a8\u6001"})]}),Object(c.jsxs)("div",{className:"ud-ctn-user-item",children:[Object(c.jsx)("span",{className:"font3 font-bold",children:e.follow&&e.follow.length}),Object(c.jsx)("span",{children:"\u5173\u6ce8"})]}),Object(c.jsxs)("div",{className:"ud-ctn-user-item",children:[Object(c.jsx)("span",{className:"font3 font-bold",children:e.fans&&e.fans.length}),Object(c.jsx)("span",{children:"\u7c89\u4e1d"})]})]})]}),Object(c.jsxs)("div",{className:"ud-ctn-dynamic-list",children:[Object(c.jsx)("div",{className:"ud-ctn-dynamic-list-title",children:"\u52a8\u6001"}),Object(c.jsx)("div",{className:"ud-ctn-dynamic-list-content",children:o.length>0&&o.map((function(t){return Object(c.jsx)(h.a,Object(j.a)(Object(j.a)({},t),{},{notShowUser:!0}),t._id)}))})]})]})}}]),e}(r.Component)),O=Object(u.b)((function(t){return{app_user:t.user}}))(Object(l.o)(b)),g=e(58),v=e.n(g),x=e(59),N=e.n(x),y=e(66),k=(e(144),function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){var t;Object(o.a)(this,e);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(t=n.call.apply(n,[this].concat(s))).state={url:t.props.url,isLoading:!1,isPopup:!1},t.isShowPopup=function(n){n.stopPropagation();var e=t.state.isPopup;t.setState({isPopup:!e})},t.handleClick=function(n){if(n.stopPropagation(),!t.props.noClick)if(t.props.user){t.input.click(),t.input.click();var e=t.input;Object(d.b)()&&e&&e.removeAttribute("capture")}else console.log("\u8fd9\u662f\u5176\u4ed6\u7528\u6237\u5594"),t.isShowPopup(n)},t.handleChange=function(n){var e=new FileReader;e.onload=function(n){t.setState({url:n.target.result}),t.setState({isLoading:!0});var e=Object(d.a)(n.target.result,"pj"+Date.now()+".jpg"),c=new FormData;c.append("file",e),N()({method:"POST",url:"http://localhost:3000/web/api/upload",data:c,headers:{"Content-Type":"multipart/form-data"}}).then((function(n){console.log("res.url",n.data);var e={avatar:n.data};Object(m.z)(t.props.app_user._id,e).then((function(n){console.log("\u66f4\u6362\u5934\u50cf\u6210\u529f"),t.setState({isLoading:!1}),v.a.publish("updateDynamicList","restart")})).catch((function(n){t.setState({isLoading:!1}),t.setState({url:t.props.url})}))})).catch((function(n){t.setState({isLoading:!1}),t.setState({url:t.props.url})}))},e.readAsDataURL(t.input.files[0])},t}return Object(s.a)(e,[{key:"render",value:function(){var t=this,n=this.props,e=n.size,o=n._id,s=this.state,a=s.url,i=s.isLoading,r=s.isPopup;return Object(c.jsxs)("div",{className:"avatar flex-center ".concat(e||"normal"," ").concat(this.props.className),onClick:this.handleClick,onChange:this.handleChange,children:[a?Object(c.jsx)("img",{ref:function(n){return t.img=n},className:"avatar-img",src:a,alt:""}):Object(c.jsx)("div",{className:"no-avatar wh100"}),Object(c.jsx)("input",{ref:function(n){return t.input=n},type:"file",id:"file",accept:"image/*",capture:"camera",multiple:!0}),Object(c.jsx)("div",{className:"".concat(i?"":"none"," avatar-loading"),children:Object(c.jsx)(p.a,{})}),Object(c.jsx)(y.a,{isPopup:r,popout:this.isShowPopup,children:r&&Object(c.jsx)(O,{_id:o})})]})}}]),e}(r.Component)),w=n.a=Object(u.b)((function(t){return{app_user:t.user}}))(Object(l.o)(k))},66:function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var c=e(1),o=e(9),s=e(10),a=e(12),i=e(11),r=e(0),u=(e(90),function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){return Object(o.a)(this,e),n.apply(this,arguments)}return Object(s.a)(e,[{key:"render",value:function(){var t=this.props,n=t.isPopup,e=t.popout;return Object(c.jsxs)("div",{onClick:function(){return console.log("\u70b9\u51fb\u4e86\u5f39\u51fa\u5c42")},className:"popup-container ".concat(n?"visible":""),children:[Object(c.jsx)("div",{onClick:e,className:"popup-container-mask ".concat(n?"show":"")}),Object(c.jsx)("div",{className:"popup-container-content ".concat(n?"popup":""),children:this.props.children})]})}}]),e}(r.Component))},70:function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var c=e(1),o=e(9),s=e(10),a=e(12),i=e(11),r=e(0),u=(e(89),function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){return Object(o.a)(this,e),n.apply(this,arguments)}return Object(s.a)(e,[{key:"render",value:function(){return Object(c.jsxs)("div",{id:"loading2",children:[Object(c.jsx)("div",{className:"demo2"}),Object(c.jsx)("div",{className:"demo2"}),Object(c.jsx)("div",{className:"demo2"}),Object(c.jsx)("div",{className:"demo2"}),Object(c.jsx)("div",{className:"demo2"})]})}}]),e}(r.Component))},82:function(t,n,e){"use strict";var c=e(1),o=e(9),s=e(10),a=e(12),i=e(11),r=e(0),u=e(18),l=e(63),d=(e(117),e(91)),p=e(66),j=(e(142),e(3)),f=e(49),m=function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){var t;Object(o.a)(this,e);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(t=n.call.apply(n,[this].concat(s))).state={isPopup:!1,goods:t.props.dynamic?t.props.dynamic.content.good.length:t.props.content.good.length,isGood:t.props.content&&t.props.content.good.includes(t.props.app_user._id)},t.isShowPopup=function(n){n.stopPropagation();var e=t.state.isPopup;t.setState({isPopup:!e})},t.updateSecondCommon=function(t){console.log("\u66f4\u65b0\u4e8c\u7ea7\u8bc4\u8bba")},t.handleCommonClick=function(n){n.stopPropagation(),t.props.isDetail||t.props.isCommon?t.isShowPopup(n):t.props.history.push("/dynamicDetail/".concat(t.props._id))},t.handleGoodClick=function(n){n.stopPropagation();var e=t.props,c=e._id,o=e.app_user,s=t.state.goods;t.props.isCommon?Object(f.k)(o._id,c).then((function(n){console.log("res",n),n.data.good.includes(o._id.toString())?(s--,t.setState({isGood:!1})):(s++,t.setState({isGood:!0})),t.setState({goods:s})})):Object(f.q)(c,o._id).then((function(n){console.log("res",n),n.data.good.includes(o._id.toString())?(s--,t.setState({isGood:!1})):(s++,t.setState({isGood:!0})),t.setState({goods:s})}))},t.handleSendClick=function(n){n.stopPropagation();var e={user_id:t.props.app_user._id,text:t.textarea.value,parent:t.props._id};Object(f.i)(e).then((function(e){t.textarea.value="",t.props.addSecondCommon(e.data),t.isShowPopup(n)}))},t}return Object(s.a)(e,[{key:"render",value:function(){var t=this,n=this.props,e=n._id,o=n.user,s=n.content,a=n.commonNum,i=this.state,r=i.isPopup,u=i.goods,j=i.isGood;return Object(c.jsxs)("div",{onClick:this.props.isDetail?null:function(){return t.props.history.push("/dynamicDetail/".concat(e))},className:" dynamic-container",children:[Object(c.jsxs)("div",{className:"dynamic-container-padding",children:[Object(c.jsxs)("div",{className:"flex ".concat(this.props.notShowUser&&"none"),children:[Object(c.jsx)("div",{className:"margin1-r",children:Object(c.jsx)(l.a,{url:o&&o.avatarUrl,_id:o._id})}),Object(c.jsxs)("div",{className:"flex flex1 flex-column",children:[Object(c.jsx)("span",{className:"font3 font-bolder",children:o&&o.username}),Object(c.jsx)("span",{className:"font-gray",children:s&&s.updatedAt})]})]}),Object(c.jsxs)("div",{className:"dynamic-container-content",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"dynamic-container-content-text font-bold",children:s&&s.text}),Object(c.jsx)("div",{className:"dynamic-container-content-imgs",children:s&&s.imgs.length>1?s.imgs.map((function(t,n){return Object(c.jsx)("div",{className:"dynamic-container-content-imgs-item",children:Object(c.jsx)("img",{className:"wh100",src:t,alt:"\u52a8\u6001\u9644\u56fe"})},n)})):s&&0!==s.imgs.length&&Object(c.jsx)("img",{style:{width:"60%"},src:s.imgs[0],alt:"\u52a8\u6001\u9644\u56fe"})})]}),Object(c.jsx)("div",{children:this.props.children}),Object(c.jsx)("div",{className:"dynamic-container-content-handle flex margin2-t",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{onClick:this.handleCommonClick,className:"".concat(this.props.isDetail&&!this.props.isCommon?"none":""," margin1-r"),children:[Object(c.jsx)("i",{className:"iconfont icon-icon-73 margin05-r"}),Object(c.jsx)("span",{className:"width04 inline-block",children:a})]}),Object(c.jsxs)("span",{onClick:this.handleGoodClick,className:"margin1-r",children:[Object(c.jsx)("i",{className:"".concat(j?"":"none"," iconfont margin05-r icon-icon-43")}),Object(c.jsx)("i",{className:"".concat(j?"none":""," iconfont margin05-r icon-icon-42")}),Object(c.jsx)("span",{className:"width04 inline-block",children:u})]})]})})]})]}),Object(c.jsx)(p.a,{isPopup:r,popout:this.isShowPopup,children:Object(c.jsxs)("div",{className:"bg popup-content padding1",children:[Object(c.jsxs)("div",{className:"popup-content-header flex",children:[Object(c.jsx)("span",{onClick:this.isShowPopup,className:"popup-content-header-cancel",children:"\u53d6\u6d88"}),Object(c.jsx)("span",{className:"font3 font-bold",children:"\u8bc4\u8bba"}),Object(c.jsx)("span",{onClick:this.handleSendClick,className:"font-blue",children:"\u53d1\u9001"})]}),Object(c.jsx)("div",{children:Object(c.jsx)("textarea",{ref:function(n){return t.textarea=n},name:"common",id:"common",cols:"30",rows:"10",placeholder:"\u8bf7\u8f93\u5165\u60a8\u8bc4\u8bba\u7684\u5185\u5bb9~"})})]})}),Object(c.jsx)(d.a,{})]})}}]),e}(r.Component);n.a=Object(u.b)((function(t){return{app_user:t.user}}))(Object(j.o)(m))},89:function(t,n,e){},90:function(t,n,e){},91:function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var c=e(1),o=e(9),s=e(10),a=e(12),i=e(11),r=e(0),u=(e(141),function(t){Object(a.a)(e,t);var n=Object(i.a)(e);function e(){return Object(o.a)(this,e),n.apply(this,arguments)}return Object(s.a)(e,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"divid-line"})}}]),e}(r.Component))}}]);
//# sourceMappingURL=1.c016274a.chunk.js.map