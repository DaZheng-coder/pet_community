{"version":3,"sources":["components/RightDelete/index.jsx","pages/AddressList/index.jsx","api/api.js","components/NavBar/index.jsx","api/index.js","components/Button/index.jsx","../node_modules/webpack/buildin/module.js","../node_modules/pubsub-js/src/pubsub.js"],"names":["RightDelete","onClick","this","props","className","isCheckbox","type","children","onDeleteClick","Component","AddressList","state","mode","addressList","fetchAddressList","apiAddressList","user","_id","then","res","console","log","setState","data","handleClick","e","stopPropagation","address","filter","item","localStorageSet","PubSub","publish","history","goBack","changeMode","handleConfirm","value","note","user_id","apiAddAddress","handleDelete","apiDeleteAddress","title","map","length","ref","c","placeholder","connect","withRouter","apiCategories","service","get","apiCommodities","category","page","apiCommodity","apiUserDetail","apiUserListSome","apiRegister","body","post","apiUserUpdate","put","apiLogin","apiFollow","app_user_id","follow_user_id","apiCartList","apiUpdateCartList","apiCartAddCommodity","delete","apiAddOrder","apiDynamicCreate","apiDynamicList","apiDynamicGood","dynamic_id","apiDynamicDetail","apiDynamicMyList","apiCommonCreate","apiCommonGood","common_id","apiCommonSecondDetail","apiCommonDelete","apiCommonMyList","NavBar","height","navbar","clientHeight","getHeight","style","dom","backgroundColor","bgColor","top","noSticky","leftSlot","color","centerSlot","rightSlot","basicUrl","axios","create","baseURL","interceptors","request","use","config","token","localStorageGet","headers","Authorization","error","Promise","reject","response","code","window","alert","msg","Button","module","exports","webpackPolyfill","deprecate","paths","Object","defineProperty","enumerable","l","i","root","factory","messages","lastUid","ALL_SUBSCRIBING_MSG","hasKeys","obj","key","prototype","hasOwnProperty","call","throwException","ex","callSubscriberWithDelayedExceptions","subscriber","message","setTimeout","callSubscriberWithImmediateExceptions","deliverMessage","originalMessage","matchedMessage","immediateExceptions","s","subscribers","callSubscriber","createDeliveryFunction","topic","String","position","lastIndexOf","substr","hasDirectSubscribersFor","Boolean","messageHasSubscribers","found","sync","deliver","toString","publishSync","subscribe","func","subscribeAll","subscribeOnce","unsubscribe","apply","arguments","clearAllSubscriptions","clearSubscriptions","m","indexOf","countSubscriptions","count","getSubscriptions","list","push","t","descendantTopicExists","isTopic","isToken","isFunction","result","undefined"],"mappings":"+LAGqBA,G,8KAEjB,OACE,qBAAKC,QAASC,KAAKC,MAAMF,QAASG,UAAS,uBAAkBF,KAAKC,MAAMC,WAAxE,SACE,sBAAKA,UAAU,KAAf,UACE,sBAAKA,UAAU,UAAf,UACE,qBAAKA,UAAS,mBAAcF,KAAKC,MAAME,WAAa,GAAK,WAAzD,SACE,uBAAOC,KAAK,eAEd,qBAAKF,UAAU,aAAf,SACGF,KAAKC,MAAMI,cAGhB,qBAAKN,QAASC,KAAKC,MAAMK,cAAeJ,UAAU,WAAlD,SACE,mBAAGA,UAAU,qC,GAdgBK,e,sNCQnCC,E,4MACJC,MAAQ,CAENC,MAAM,EAENC,YAAa,I,EASfC,iBAAmB,WACjBC,YAAe,EAAKZ,MAAMa,KAAKC,KAAKC,MAAK,SAAAC,GACvCC,QAAQC,IAAI,mDAAYF,GACxB,EAAKG,SAAS,CAACT,YAAaM,EAAII,W,EAMpCC,YAAc,SAACC,EAAGR,GAChBQ,EAAEC,kBACF,IAAMC,EAAU,EAAKhB,MAAME,YAAYe,QAAO,SAAAC,GAAI,OAAIA,EAAKZ,MAAQA,KAAK,GACxEG,QAAQC,IAAI,qBAAOM,GACnBG,YAAgB,gBAAiBH,GACjCI,IAAOC,QAAQ,gBAAiBL,GAChC,EAAKxB,MAAM8B,QAAQC,U,EAIrBC,WAAa,SAACV,GACZA,EAAEC,kBADgB,IAEXd,EAAQ,EAAKD,MAAbC,KACP,EAAKU,SAAS,CAACV,MAAOA,K,EAIxBwB,cAAgB,SAACX,GACfA,EAAEC,kBACF,EAAKS,WAAWV,GAChB,IAAME,EAAU,CACdA,QAAS,EAAKA,QAAQU,MACtBC,KAAM,EAAKA,KAAKD,MAChBE,QAAS,EAAKpC,MAAMa,KAAKC,KAE3BuB,YAAcb,GAAST,MAAK,SAAAC,GAC1BC,QAAQC,IAAIF,EAAK,4BACjB,EAAKL,uB,EAKT2B,aAAe,SAAChB,EAAGR,GACjBQ,EAAEC,kBACFgB,YAAiBzB,GAAKC,MAAK,SAAAC,GACzBC,QAAQC,IAAI,2BAAQF,GACpB,EAAKL,uB,kEAjDPZ,KAAKY,qB,+BAqDG,IAAD,SACqBZ,KAAKS,MAA1BC,EADA,EACAA,KAAMC,EADN,EACMA,YAEb,OADAO,QAAQC,IAAI,4BAEV,sBAAKjB,UAAU,eAAf,UACE,cAAC,IAAD,CAAQuC,MAAM,6BACd,qBAAKvC,UAAU,eAAf,SAEIS,EAAY+B,KAAI,SAAAf,GAAI,OAClB,eAAC,IAAD,CAAa5B,QAAS,SAACwB,GAAD,OAAO,EAAKD,YAAYC,EAAEI,EAAKZ,MAAMT,cAAe,SAACiB,GAAD,OAAO,EAAKgB,aAAahB,EAAGI,EAAKZ,MAA3G,UACE,sBAAMb,UAAU,QAAhB,SAAyByB,EAAKF,UAC9B,qBAAKvB,UAAU,iBAAf,SAAiCyB,EAAKS,SAF8ET,EAAKZ,UAMjI,qBAAKb,UAAU,qCAAf,SACES,EAAYgC,OAAS,EAAI,+GAAuB,2DAGhDjC,EAAO,sBAAKR,UAAU,oBAAf,UACL,qBAAKA,UAAU,oBAAf,6CACA,sBAAKA,UAAU,YAAf,0BACK,uBAAO0C,IAAK,SAAAC,GAAC,OAAI,EAAKpB,QAAUoB,GAAG3C,UAAU,0BAA0BE,KAAK,OAAO0C,YAAY,mCADpG,8BAES,uBAAOF,IAAK,SAAAC,GAAC,OAAI,EAAKT,KAAOS,GAAG3C,UAAU,wBAAwBE,KAAK,OAAO0C,YAAY,oDAEnG,cAAC,IAAD,CAAQ5C,UAAU,YAAYH,QAASC,KAAKkC,cAA5C,6BAEF,cAAC,IAAD,CAAQhC,UAAU,UAAUH,QAASC,KAAKiC,WAA1C,6C,GA1FgB1B,aAiGXwC,uBAAQ,SAAAtC,GAAK,MAAK,CAACK,KAAML,EAAMK,QAA/BiC,CAAuCC,YAAWxC,K,gCC5GjE,g4BAIayC,EAAgB,kBAAMC,IAAQC,IAAI,0BAElCC,EAAiB,SAACC,EAASC,GAAV,OAAmBJ,IAAQC,IAAR,uBAA4BE,EAA5B,YAAwCC,KAE5EC,EAAe,SAACxC,GAAD,OAASmC,IAAQC,IAAR,qBAA0BpC,KAGlDyC,EAAgB,SAACnB,GAAD,OAAaa,IAAQC,IAAR,uBAA4Bd,KAEzDoB,EAAkB,kBAAMP,IAAQC,IAAI,oBAEpCO,EAAc,SAACC,GAAD,OAAUT,IAAQU,KAAK,YAAaD,IAElDE,EAAgB,SAACxB,EAAQsB,GAAT,OAAkBT,IAAQY,IAAR,uBAA4BzB,GAAWsB,IAEzEI,EAAW,SAACJ,GAAD,OAAUT,IAAQU,KAAK,SAAUD,IAI5CK,EAAY,SAACC,EAAaC,GAAd,OAAiChB,IAAQC,IAAR,2BAAgCc,EAAhC,YAA+CC,KAG5FC,EAAc,SAACpD,GAAD,OAASmC,IAAQC,IAAR,qBAA0BpC,KAEjDqD,EAAoB,SAACrD,EAAI4C,GAAL,OAAcT,IAAQY,IAAR,4BAAiC/C,GAAO4C,IAE1EU,EAAsB,SAACtD,EAAK4C,GAAN,OAAeT,IAAQU,KAAR,yBAA+B7C,GAAO4C,IAG3E9C,EAAiB,SAACE,GAAD,OAASmC,IAAQC,IAAR,wBAA6BpC,KAEvDuB,EAAgB,SAACqB,GAAD,OAAUT,IAAQU,KAAK,kBAAmBD,IAE1DnB,EAAmB,SAACzB,GAAD,OAASmC,IAAQoB,OAAR,yBAAiCvD,KAK7DwD,EAAc,SAACZ,GAAD,OAAUT,IAAQU,KAAK,gBAAiBD,IAGtDa,EAAmB,SAACb,GAAD,OAAUT,IAAQU,KAAK,kBAAmBD,IAE7Dc,EAAiB,SAACnB,GAAD,OAAUJ,IAAQC,IAAR,wBAA6BG,KAExDoB,EAAiB,SAACC,EAAYtC,GAAb,OAAyBa,IAAQC,IAAR,wBAA6BwB,EAA7B,YAA2CtC,KAErFuC,EAAmB,SAACD,GAAD,OAAgBzB,IAAQC,IAAR,0BAA+BwB,KAElEE,EAAmB,SAACxC,GAAD,OAAaa,IAAQC,IAAR,0BAA+Bd,KAG/DyC,EAAkB,SAACnB,GAAD,OAAUT,IAAQU,KAAK,iBAAkBD,IAE3DoB,EAAgB,SAAC1C,EAAS2C,GAAV,OAAwB9B,IAAQC,IAAR,uBAA4Bd,EAA5B,YAAuC2C,KAE/EC,EAAwB,SAACD,GAAD,OAAe9B,IAAQC,IAAR,gCAAqC6B,KAE5EE,EAAkB,SAACF,GAAD,OAAe9B,IAAQoB,OAAR,yBAAiCU,KAElEG,EAAkB,SAAC9C,GAAD,OAAaa,IAAQC,IAAR,0BAA+Bd,M,uFC5DrE+C,G,kNACJ3E,MAAQ,CACN4E,OAAQ,G,kEAIR,IAAMA,EAASrF,KAAKsF,OAAOC,aAC3BvF,KAAKoB,SAAS,CAACiE,WAEfrF,KAAKC,MAAMuF,WAAaxF,KAAKC,MAAMuF,UAAUH,K,+BAGrC,IAAD,OAEP,OADAnE,QAAQC,IAAI,mBAAoBnB,KAAKC,MAAMwF,OAEzC,sBAAK7C,IAAK,SAAA8C,GAAG,OAAI,EAAKJ,OAASI,GAAKD,MAAOzF,KAAKC,MAAMwF,OAAS,CAACE,gBAAiB3F,KAAKC,MAAM2F,SAAW,OAAQC,IAAK,GAAI3F,UAAS,yCAAoCF,KAAKC,MAAMC,UAA/C,YAA4DF,KAAKC,MAAM6F,UAAY,UAApN,UACE,8BACmC,mBAAxB9F,KAAKC,MAAM8F,UAA4B/F,KAAKC,MAAM8F,UAAY,mBAAG7F,UAAU,oCAAoCuF,MAAO,CAACO,MAAOhG,KAAKC,MAAM+F,OAAQjG,QAAS,kBAAM,EAAKE,MAAM8B,QAAQC,cAE9L,qBAAK9B,UAAU,+BAAf,SACGF,KAAKC,MAAMgG,YAAc,sBAAM/F,UAAU,kBAAkBuF,MAAO,CAACO,MAAOhG,KAAKC,MAAM+F,OAA5D,SAAqEhG,KAAKC,MAAMwC,UAE5G,qBAAKvC,UAAU,yBAAf,SACGF,KAAKC,MAAMiG,WAAa,Y,GAvBd3F,cA+BNyC,gBAAWoC,I,qDCnC1B,uEAUae,EAAW,qCAGlBjD,EAAUkD,IAAMC,OAAO,CAC3BC,QAASH,IAIXjD,EAAQqD,aAAaC,QAAQC,KAAI,SAAAC,GAC/B,IAAMC,EAAQC,YAAgB,aAc9B,OATID,IACFzF,QAAQC,IAAI,sCAAmBwF,GAC/BD,EAAOG,QAAQC,cAAgB,UAAYH,GAOtCD,KACN,SAAAK,GACD,OAAOC,QAAQC,OAAOF,MAIxB7D,EAAQqD,aAAaW,SAAST,KAAI,SAAAS,GAGhC,IAAIA,EAASC,KAmBX,OAAOD,EAlBP,OAAQA,EAASC,MACf,KAAK,IACH,OAAOD,EAAS7F,KAClB,KAAK,IAEHH,QAAQC,IAAI,kCACZ,MACF,KAAK,IAEHD,QAAQC,IAAI,iCACZ,MACF,QAGEiG,OAAOC,MAAM,2BAAQH,EAAS7F,KAAKiG,KACnCpG,QAAQC,IAAI,2BAAQ+F,EAAS7F,KAAKiG,SAO3BpE,O,kHC9DMqE,G,kNACnBjG,YAAc,SAACC,GAEb,GADAA,EAAEC,kBACsB,YAApB,EAAKvB,MAAMG,KAGb,OAAO,EAFP,EAAKH,MAAMF,QAAQwB,I,uDAMrB,OACE,qBACExB,QAASC,KAAKsB,YACdmE,MAAOzF,KAAKC,MAAMwF,MAClBvF,UAAS,oBAAeF,KAAKC,MAAMG,MAAQ,UAAlC,YAA+CJ,KAAKC,MAAMC,WAHrE,SAIEF,KAAKC,MAAMwC,OAASzC,KAAKC,MAAMI,e,GAfHE,e,sCCHpCiH,EAAOC,QAAU,SAASD,GAoBzB,OAnBKA,EAAOE,kBACXF,EAAOG,UAAY,aACnBH,EAAOI,MAAQ,GAEVJ,EAAOnH,WAAUmH,EAAOnH,SAAW,IACxCwH,OAAOC,eAAeN,EAAQ,SAAU,CACvCO,YAAY,EACZ5E,IAAK,WACJ,OAAOqE,EAAOQ,KAGhBH,OAAOC,eAAeN,EAAQ,KAAM,CACnCO,YAAY,EACZ5E,IAAK,WACJ,OAAOqE,EAAOS,KAGhBT,EAAOE,gBAAkB,GAEnBF,I,oBCpBR,aAOC,SAAUU,EAAMC,GACb,aAEA,IAAItG,EAAS,GACbqG,EAAKrG,OAASA,EAiBkC,SAAUA,GAG1D,IAAIuG,EAAW,GACXC,GAAW,EACXC,EAAsB,IAE1B,SAASC,EAAQC,GACb,IAAIC,EAEJ,IAAKA,KAAOD,EACR,GAAKX,OAAOa,UAAUC,eAAeC,KAAKJ,EAAKC,GAC3C,OAAO,EAGf,OAAO,EASX,SAASI,EAAgBC,GACrB,OAAO,WACH,MAAMA,GAId,SAASC,EAAqCC,EAAYC,EAAS5H,GAC/D,IACI2H,EAAYC,EAAS5H,GACvB,MAAOyH,GACLI,WAAYL,EAAgBC,GAAM,IAI1C,SAASK,EAAuCH,EAAYC,EAAS5H,GACjE2H,EAAYC,EAAS5H,GAGzB,SAAS+H,EAAgBC,EAAiBC,EAAgBjI,EAAMkI,GAC5D,IAEIC,EAFAC,EAAcrB,EAASkB,GACvBI,EAAiBH,EAAsBJ,EAAwCJ,EAGnF,GAAMlB,OAAOa,UAAUC,eAAeC,KAAMR,EAAUkB,GAItD,IAAKE,KAAKC,EACD5B,OAAOa,UAAUC,eAAeC,KAAKa,EAAaD,IACnDE,EAAgBD,EAAYD,GAAIH,EAAiBhI,GAK7D,SAASsI,EAAwBV,EAAS5H,EAAMkI,GAC5C,OAAO,WACH,IAAIK,EAAQC,OAAQZ,GAChBa,EAAWF,EAAMG,YAAa,KAMlC,IAHAX,EAAeH,EAASA,EAAS5H,EAAMkI,IAGlB,IAAdO,GAEHA,GADAF,EAAQA,EAAMI,OAAQ,EAAGF,IACRC,YAAY,KAC7BX,EAAgBH,EAASW,EAAOvI,EAAMkI,GAG1CH,EAAeH,EAASX,EAAqBjH,EAAMkI,IAI3D,SAASU,EAAyBhB,GAC9B,IAAIW,EAAQC,OAAQZ,GAGpB,OAFYiB,QAAQrC,OAAOa,UAAUC,eAAeC,KAAMR,EAAUwB,IAAWrB,EAAQH,EAASwB,KAKpG,SAASO,EAAuBlB,GAK5B,IAJA,IAAIW,EAAQC,OAAQZ,GAChBmB,EAAQH,EAAwBL,IAAUK,EAAwB3B,GAClEwB,EAAWF,EAAMG,YAAa,MAEzBK,IAAuB,IAAdN,GAEdA,GADAF,EAAQA,EAAMI,OAAQ,EAAGF,IACRC,YAAa,KAC9BK,EAAQH,EAAwBL,GAGpC,OAAOQ,EAGX,SAAStI,EAASmH,EAAS5H,EAAMgJ,EAAMd,GAGnC,IAAIe,EAAUX,EAFdV,EAA8B,kBAAZA,EAAwBA,EAAQsB,WAAatB,EAEhB5H,EAAMkI,GAGrD,QAFqBY,EAAuBlB,MAM9B,IAAToB,EACDC,IAEApB,WAAYoB,EAAS,IAElB,GAWXzI,EAAOC,QAAU,SAAUmH,EAAS5H,GAChC,OAAOS,EAASmH,EAAS5H,GAAM,EAAOQ,EAAO0H,sBAWjD1H,EAAO2I,YAAc,SAAUvB,EAAS5H,GACpC,OAAOS,EAASmH,EAAS5H,GAAM,EAAMQ,EAAO0H,sBAWhD1H,EAAO4I,UAAY,SAAUxB,EAASyB,GAClC,GAAqB,oBAATA,EACR,OAAO,EAGXzB,EAA8B,kBAAZA,EAAwBA,EAAQsB,WAAatB,EAGzDpB,OAAOa,UAAUC,eAAeC,KAAMR,EAAUa,KAClDb,EAASa,GAAW,IAKxB,IAAItC,EAAQ,OAASkD,SAASxB,GAI9B,OAHAD,EAASa,GAAStC,GAAS+D,EAGpB/D,GAGX9E,EAAO8I,aAAe,SAAUD,GAC5B,OAAO7I,EAAO4I,UAAUnC,EAAqBoC,IAWjD7I,EAAO+I,cAAgB,SAAU3B,EAASyB,GACtC,IAAI/D,EAAQ9E,EAAO4I,UAAWxB,GAAS,WAEnCpH,EAAOgJ,YAAalE,GACpB+D,EAAKI,MAAO9K,KAAM+K,cAEtB,OAAOlJ,GASXA,EAAOmJ,sBAAwB,WAC3B5C,EAAW,IAUfvG,EAAOoJ,mBAAqB,SAA4BrB,GACpD,IAAIsB,EACJ,IAAKA,KAAK9C,EACFP,OAAOa,UAAUC,eAAeC,KAAKR,EAAU8C,IAA2B,IAArBA,EAAEC,QAAQvB,WACxDxB,EAAS8C,IAY5BrJ,EAAOuJ,mBAAqB,SAA4BxB,GACpD,IAAIsB,EACAG,EAAQ,EACZ,IAAKH,KAAK9C,EACFP,OAAOa,UAAUC,eAAeC,KAAKR,EAAU8C,IAA2B,IAArBA,EAAEC,QAAQvB,IAC/DyB,IAGR,OAAOA,GAUXxJ,EAAOyJ,iBAAmB,SAA0B1B,GAChD,IAAIsB,EACAK,EAAO,GACX,IAAKL,KAAK9C,EACFP,OAAOa,UAAUC,eAAeC,KAAKR,EAAU8C,IAA2B,IAArBA,EAAEC,QAAQvB,IAC/D2B,EAAKC,KAAKN,GAGlB,OAAOK,GAuBX1J,EAAOgJ,YAAc,SAAS1I,GAC1B,IAeI+I,EAAGjC,EAASwC,EAfZC,EAAwB,SAAS9B,GAC7B,IAAIsB,EACJ,IAAMA,KAAK9C,EACP,GAAKP,OAAOa,UAAUC,eAAeC,KAAKR,EAAU8C,IAA2B,IAArBA,EAAEC,QAAQvB,GAEhE,OAAO,EAIf,OAAO,GAEX+B,EAA8B,kBAAVxJ,IAAwB0F,OAAOa,UAAUC,eAAeC,KAAKR,EAAUjG,IAAUuJ,EAAsBvJ,IAC3HyJ,GAAcD,GAA4B,kBAAVxJ,EAChC0J,EAA8B,oBAAV1J,EACpB2J,GAAS,EAGb,IAAIH,EAAJ,CAKA,IAAMT,KAAK9C,EACP,GAAKP,OAAOa,UAAUC,eAAeC,KAAMR,EAAU8C,GAAK,CAGtD,GAFAjC,EAAUb,EAAS8C,GAEdU,GAAW3C,EAAQ9G,GAAQ,QACrB8G,EAAQ9G,GACf2J,EAAS3J,EAET,MAGJ,GAAI0J,EACA,IAAMJ,KAAKxC,EACHpB,OAAOa,UAAUC,eAAeC,KAAKK,EAASwC,IAAMxC,EAAQwC,KAAOtJ,WAC5D8G,EAAQwC,GACfK,GAAS,GAO7B,OAAOA,EA1BHjK,EAAOoJ,mBAAmB9I,IAnTlCgG,CAAQtG,QAGWkK,IAAXvE,GAAwBA,EAAOC,UAC/BA,EAAUD,EAAOC,QAAU5F,GAE/B4F,EAAQ5F,OAASA,EACjB2F,EAAOC,QAAUA,EAAU5F,EAZlC,CAqBqB,kBAAXuF,QAAuBA,QAAYpH,Q","file":"static/js/18.3a791838.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class RightDelete extends Component {\r\n  render() {\r\n    return (\r\n      <div onClick={this.props.onClick} className={`rd-container ${this.props.className}`}>\r\n        <div className=\"rd\">\r\n          <div className=\"rd-left\">\r\n            <div className={`rd-input ${this.props.isCheckbox ? '' : 'vhidden'}`}>\r\n              <input type=\"checkbox\"/>\r\n            </div>\r\n            <div className=\"rd-content\">\r\n              {this.props.children}\r\n            </div>\r\n          </div>\r\n          <div onClick={this.props.onDeleteClick} className=\"rd-right\">\r\n            <i className=\"iconfont icon-icon-17\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport NavBar from '@/components/NavBar'\r\n// import AddressItem from './AddressItem'\r\nimport Button from '@/components/Button'\r\nimport RightDelete from '@/components/RightDelete'\r\nimport './index.less'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {apiAddressList, apiAddAddress, apiDeleteAddress} from '@/api/api'\r\nimport {localStorageSet} from '@/utils'\r\nimport PubSub from 'pubsub-js'\r\nclass AddressList extends Component {\r\n  state = {\r\n    // 模式，false为默认，true为编辑\r\n    mode: false,\r\n    // 地址列表\r\n    addressList: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 初始化，获取用户的地址\r\n    this.fetchAddressList()\r\n  }\r\n\r\n  // 获取地址列表\r\n  fetchAddressList = () => {\r\n    apiAddressList(this.props.user._id).then(res => {\r\n      console.log('获取用户地址成功', res)\r\n      this.setState({addressList: res.data})\r\n    })\r\n  }\r\n\r\n\r\n  // 处理点击地址栏的事件\r\n  handleClick = (e, _id) => {\r\n    e.stopPropagation()\r\n    const address = this.state.addressList.filter(item => item._id === _id)[0]\r\n    console.log('选中了', address)\r\n    localStorageSet('selectAddress', address)\r\n    PubSub.publish('selectAddress', address)\r\n    this.props.history.goBack()\r\n  }\r\n\r\n  // 切换编辑模式\r\n  changeMode = (e) => {\r\n    e.stopPropagation() \r\n    const {mode} = this.state\r\n    this.setState({mode: !mode})\r\n  }\r\n\r\n  // 确认添加地址\r\n  handleConfirm = (e) => {\r\n    e.stopPropagation()\r\n    this.changeMode(e)\r\n    const address = {\r\n      address: this.address.value,\r\n      note: this.note.value,\r\n      user_id: this.props.user._id\r\n    }\r\n    apiAddAddress(address).then(res => {\r\n      console.log(res, '添加成功')\r\n      this.fetchAddressList()\r\n    })\r\n  }\r\n\r\n  // 删除地址\r\n  handleDelete = (e, _id) => {\r\n    e.stopPropagation()\r\n    apiDeleteAddress(_id).then(res => {\r\n      console.log('删除成功', res)\r\n      this.fetchAddressList()\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {mode, addressList} = this.state\r\n    console.log('组件加载')\r\n    return (\r\n      <div className=\"al-container\">\r\n        <NavBar title=\"选择地址\" />\r\n        <div className=\"margin1-t bg\">\r\n          {\r\n            addressList.map(item => \r\n              <RightDelete onClick={(e) => this.handleClick(e,item._id)} onDeleteClick={(e) => this.handleDelete(e, item._id)} key={item._id}>\r\n                <span className=\"font3\">{item.address}</span>\r\n                <div className=\"font-deep-gray\">{item.note}</div>\r\n              </RightDelete>)\r\n          }\r\n        </div>\r\n        <div className=\"text-center margin1 font-deep-gray\">{\r\n          addressList.length > 0 ? '在地址栏右滑可删除，暂未开放编辑功能' : '地址为空，添加地址'\r\n        }</div>\r\n        {\r\n          mode ? <div className=\"bg padding1 font3\">\r\n            <div className=\"font3 font-bolder\">添加地址 ::::::</div>\r\n            <div className=\"margin1-t\">\r\n              地址:<input ref={c => this.address = c} className=\"padding1-tb font3 block\" type=\"text\" placeholder=\"请输入地址\"/>\r\n              备注(可选):<input ref={c => this.note = c} className=\"font3 block margin1-t\" type=\"text\" placeholder=\"(可选)请输入备注\"/>\r\n            </div>\r\n            <Button className=\"margin2-t\" onClick={this.handleConfirm}>确认</Button>\r\n          </div>:\r\n          <Button className=\"margin1\" onClick={this.changeMode}>添加地址</Button>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({user: state.user}))(withRouter(AddressList))\r\n","// 统一管理接口\r\nimport service from './index'\r\n\r\n// 获取上级分类为商品的分类\r\nexport const apiCategories = () => service.get('/categories/commodity')\r\n// 获取上级分类为category的商品列表\r\nexport const apiCommodities = (category,page) => service.get(`/commodities/${category}/${page}`)\r\n// 根据id获取商品信息\r\nexport const apiCommodity = (_id) => service.get(`/commodity/${_id}`)\r\n\r\n// 获取用户详细信息\r\nexport const apiUserDetail = (user_id) => service.get(`/user/detail/${user_id}`)\r\n// 获取一些用户\r\nexport const apiUserListSome = () => service.get('/user/list/some')\r\n// 注册用户\r\nexport const apiRegister = (body) => service.post('/register', body)\r\n// 更新用户信息\r\nexport const apiUserUpdate = (user_id,body) => service.put(`/user/update/${user_id}`, body)\r\n// 登录\r\nexport const apiLogin = (body) => service.post('/login', body)\r\n// 查看是否有用户名\r\nexport const apiIsExistUsername = (body) => service.get('/isExistUsername', body)\r\n// 关注\r\nexport const apiFollow = (app_user_id, follow_user_id) => service.get(`/user/follow/add/${app_user_id}/${follow_user_id}`)\r\n\r\n// 获取购物车列表，传入的id是用户id\r\nexport const apiCartList = (_id) => service.get(`/cart/list/${_id}`)\r\n// 更新购物车列表，传入的id是用户id\r\nexport const apiUpdateCartList = (_id,body) => service.put(`/cart/list/update/${_id}`, body)\r\n// 将商品添加到购物车列表，id为用户id，body传入商品_id\r\nexport const apiCartAddCommodity = (_id, body) => service.post(`/cart/list/add/${_id}`, body)\r\n\r\n// 获取地址列表 id为用户id\r\nexport const apiAddressList = (_id) => service.get(`/address/list/${_id}`)\r\n// 添加地址\r\nexport const apiAddAddress = (body) => service.post('/address/create', body)\r\n// 删除地址，传入的是地址的id\r\nexport const apiDeleteAddress = (_id) => service.delete(`address/delete/${_id}`)\r\n\r\n// 获取订单列表，id为用户id\r\nexport const apiOrderList = (_id) => service.get(`/order/list/${_id}`)\r\n// 创建添加订单\r\nexport const apiAddOrder = (body) => service.post('/order/create', body)\r\n\r\n// 创建动态\r\nexport const apiDynamicCreate = (body) => service.post('/dynamic/create', body)\r\n// 获取动态列表，body为查询条件\r\nexport const apiDynamicList = (page) => service.get(`/dynamic/list/${page}`)\r\n// 更新动态点赞\r\nexport const apiDynamicGood = (dynamic_id, user_id) => service.get(`/dynamic/good/${dynamic_id}/${user_id}`)\r\n// 获取单个动态的详细信息\r\nexport const apiDynamicDetail = (dynamic_id) => service.get(`/dynamic/detail/${dynamic_id}`)\r\n// 获取个人动态列表\r\nexport const apiDynamicMyList = (user_id) => service.get(`dynamic/my/list/${user_id}`)\r\n\r\n// 创建评论\r\nexport const apiCommonCreate = (body) => service.post('/common/create', body)\r\n// 评论点赞\r\nexport const apiCommonGood = (user_id, common_id) => service.get(`/common/good/${user_id}/${common_id}`)\r\n// 获取次级评论详情\r\nexport const apiCommonSecondDetail = (common_id) => service.get(`/common/second/detail/${common_id}`)\r\n// 删除评论\r\nexport const apiCommonDelete = (common_id) => service.delete(`/common/delete/${common_id}`)\r\n// 获取个人发布的评论列表\r\nexport const apiCommonMyList = (user_id) => service.get(`/common/my/list/${user_id}`)\r\n\r\n","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport './index.less'\r\n\r\nclass NavBar extends Component {\r\n  state = {\r\n    height: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    const height = this.navbar.clientHeight\r\n    this.setState({height})\r\n    // 如果父元素想获取该组件的高度，就发送给他\r\n    this.props.getHeight && this.props.getHeight(height)\r\n  }\r\n\r\n  render() {\r\n    console.log('this.props.style', this.props.style)\r\n    return (\r\n      <div ref={dom => this.navbar = dom} style={this.props.style || {backgroundColor: this.props.bgColor || '#FFF', top: 0}} className={`navbar-container padding1 flex ${this.props.className} ${this.props.noSticky || 'sticky'}`}>\r\n        <div>\r\n          {(typeof this.props.leftSlot === 'boolean' ) || this.props.leftSlot || <i className=\"iconfont icon-icon-63 line-center\" style={{color: this.props.color}} onClick={() => this.props.history.goBack()} />}\r\n        </div>\r\n        <div className=\"flex1 text-center margin1-lr\">\r\n          {this.props.centerSlot || <span className=\"font3 font-bold\" style={{color: this.props.color}}>{this.props.title}</span>}\r\n        </div>\r\n        <div className=\"navbar-container-right\">\r\n          {this.props.rightSlot || ''}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(NavBar)","// 封装axios\r\nimport axios from 'axios'\r\nimport QS from 'qs'\r\nimport {localStorageGet}  from '@/utils'\r\n// import Toast from ''\r\n\r\n//保存环境变量\r\n// const isPrd = process.env.NODE_ENV == 'production';\r\n//区分开发环境还是生产环境基础URL\r\n// export const basicUrl = isPrd ? process.env.REACT_APP_API_URL : 'http://localhost:3001/web/api'\r\nexport const basicUrl = 'http://pet.zhengjunqin.top/web/api'\r\n\r\n// 设置axios基本路径\r\nconst service = axios.create({\r\n  baseURL: basicUrl\r\n})\r\n\r\n// 请求拦截器\r\nservice.interceptors.request.use(config => { \r\n  const token = localStorageGet('userToken')\r\n  // 在每次的请求中添加token\r\n  // config.data = Object.assign({}, config.data, {\r\n  //   token: token,\r\n  // })\r\n  if (token) {\r\n    console.log('有token，设置token1', token)\r\n    config.headers.Authorization = 'Bearer ' + token\r\n  }\r\n  // 设置请求头\r\n  // config.headers = {\r\n  //   'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n  // }\r\n  // config.data = QS.stringify(config.data)\r\n  return config\r\n}, error => { \r\n  return Promise.reject(error);\r\n})\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(response => {\r\n  //根据返回不同的状态码做不同的事情\r\n  // 这里一定要和后台开发人员协商好统一的错误状态码\r\n  if (response.code) {\r\n    switch (response.code) {\r\n      case 200:\r\n        return response.data;\r\n      case 401:\r\n        //未登录处理方法\r\n        console.log('用户未登录')\r\n        break;\r\n      case 403:\r\n        //token过期处理方法\r\n        console.log('用户token过期')\r\n        break;\r\n      default:\r\n        // 发送错误消息\r\n        // message.error(response.data.msg)\r\n        window.alert('错误消息', response.data.msg)\r\n        console.log('错误消息', response.data.msg)\r\n    }\r\n  } else { \r\n    return response;\r\n  }\r\n})\r\n//最后把封装好的axios导出\r\nexport default service\r\n","import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class Button extends Component {\r\n  handleClick = (e) => {\r\n    e.stopPropagation()\r\n    if (this.props.type !== 'useless') {\r\n      this.props.onClick(e)\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div \r\n        onClick={this.handleClick} \r\n        style={this.props.style}\r\n        className={`my-button ${this.props.type || 'default'} ${this.props.className}`}\r\n      >{this.props.title || this.props.children}</div>\r\n    )\r\n  }\r\n}\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\n * Copyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk\n * License: MIT - http://mrgnrdrck.mit-license.org\n *\n * https://github.com/mroderick/PubSubJS\n */\n\n(function (root, factory){\n    'use strict';\n\n    var PubSub = {};\n    root.PubSub = PubSub;\n    factory(PubSub);\n    // CommonJS and Node.js module support\n    if (typeof exports === 'object'){\n        if (module !== undefined && module.exports) {\n            exports = module.exports = PubSub; // Node.js specific `module.exports`\n        }\n        exports.PubSub = PubSub; // CommonJS module 1.1.1 spec\n        module.exports = exports = PubSub; // CommonJS\n    }\n    // AMD support\n    /* eslint-disable no-undef */\n    else if (typeof define === 'function' && define.amd){\n        define(function() { return PubSub; });\n        /* eslint-enable no-undef */\n    }\n\n}(( typeof window === 'object' && window ) || this, function (PubSub){\n    'use strict';\n\n    var messages = {},\n        lastUid = -1,\n        ALL_SUBSCRIBING_MSG = '*';\n\n    function hasKeys(obj){\n        var key;\n\n        for (key in obj){\n            if ( Object.prototype.hasOwnProperty.call(obj, key) ){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns a function that throws the passed exception, for use as argument for setTimeout\n     * @alias throwException\n     * @function\n     * @param { Object } ex An Error object\n     */\n    function throwException( ex ){\n        return function reThrowException(){\n            throw ex;\n        };\n    }\n\n    function callSubscriberWithDelayedExceptions( subscriber, message, data ){\n        try {\n            subscriber( message, data );\n        } catch( ex ){\n            setTimeout( throwException( ex ), 0);\n        }\n    }\n\n    function callSubscriberWithImmediateExceptions( subscriber, message, data ){\n        subscriber( message, data );\n    }\n\n    function deliverMessage( originalMessage, matchedMessage, data, immediateExceptions ){\n        var subscribers = messages[matchedMessage],\n            callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions,\n            s;\n\n        if ( !Object.prototype.hasOwnProperty.call( messages, matchedMessage ) ) {\n            return;\n        }\n\n        for (s in subscribers){\n            if ( Object.prototype.hasOwnProperty.call(subscribers, s)){\n                callSubscriber( subscribers[s], originalMessage, data );\n            }\n        }\n    }\n\n    function createDeliveryFunction( message, data, immediateExceptions ){\n        return function deliverNamespaced(){\n            var topic = String( message ),\n                position = topic.lastIndexOf( '.' );\n\n            // deliver the message as it is now\n            deliverMessage(message, message, data, immediateExceptions);\n\n            // trim the hierarchy and deliver message to each level\n            while( position !== -1 ){\n                topic = topic.substr( 0, position );\n                position = topic.lastIndexOf('.');\n                deliverMessage( message, topic, data, immediateExceptions );\n            }\n\n            deliverMessage(message, ALL_SUBSCRIBING_MSG, data, immediateExceptions);\n        };\n    }\n\n    function hasDirectSubscribersFor( message ) {\n        var topic = String( message ),\n            found = Boolean(Object.prototype.hasOwnProperty.call( messages, topic ) && hasKeys(messages[topic]));\n\n        return found;\n    }\n\n    function messageHasSubscribers( message ){\n        var topic = String( message ),\n            found = hasDirectSubscribersFor(topic) || hasDirectSubscribersFor(ALL_SUBSCRIBING_MSG),\n            position = topic.lastIndexOf( '.' );\n\n        while ( !found && position !== -1 ){\n            topic = topic.substr( 0, position );\n            position = topic.lastIndexOf( '.' );\n            found = hasDirectSubscribersFor(topic);\n        }\n\n        return found;\n    }\n\n    function publish( message, data, sync, immediateExceptions ){\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        var deliver = createDeliveryFunction( message, data, immediateExceptions ),\n            hasSubscribers = messageHasSubscribers( message );\n\n        if ( !hasSubscribers ){\n            return false;\n        }\n\n        if ( sync === true ){\n            deliver();\n        } else {\n            setTimeout( deliver, 0 );\n        }\n        return true;\n    }\n\n    /**\n     * Publishes the message, passing the data to it's subscribers\n     * @function\n     * @alias publish\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publish = function( message, data ){\n        return publish( message, data, false, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Publishes the message synchronously, passing the data to it's subscribers\n     * @function\n     * @alias publishSync\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publishSync = function( message, data ){\n        return publish( message, data, true, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Subscribes the passed function to the passed message. Every returned token is unique and should be stored if you need to unsubscribe\n     * @function\n     * @alias subscribe\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { String }\n     */\n    PubSub.subscribe = function( message, func ){\n        if ( typeof func !== 'function'){\n            return false;\n        }\n\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        // message is not registered yet\n        if ( !Object.prototype.hasOwnProperty.call( messages, message ) ){\n            messages[message] = {};\n        }\n\n        // forcing token as String, to allow for future expansions without breaking usage\n        // and allow for easy use as key names for the 'messages' object\n        var token = 'uid_' + String(++lastUid);\n        messages[message][token] = func;\n\n        // return token for unsubscribing\n        return token;\n    };\n\n    PubSub.subscribeAll = function( func ){\n        return PubSub.subscribe(ALL_SUBSCRIBING_MSG, func);\n    };\n\n    /**\n     * Subscribes the passed function to the passed message once\n     * @function\n     * @alias subscribeOnce\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { PubSub }\n     */\n    PubSub.subscribeOnce = function( message, func ){\n        var token = PubSub.subscribe( message, function(){\n            // before func apply, unsubscribe message\n            PubSub.unsubscribe( token );\n            func.apply( this, arguments );\n        });\n        return PubSub;\n    };\n\n    /**\n     * Clears all subscriptions\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     */\n    PubSub.clearAllSubscriptions = function clearAllSubscriptions(){\n        messages = {};\n    };\n\n    /**\n     * Clear subscriptions by the topic\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     * @return { int }\n     */\n    PubSub.clearSubscriptions = function clearSubscriptions(topic){\n        var m;\n        for (m in messages){\n            if (Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0){\n                delete messages[m];\n            }\n        }\n    };\n\n    /**\n       Count subscriptions by the topic\n     * @function\n     * @public\n     * @alias countSubscriptions\n     * @return { Array }\n    */\n    PubSub.countSubscriptions = function countSubscriptions(topic){\n        var m;\n        var count = 0;\n        for (m in messages){\n            if (Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0){\n                count++;\n            }\n        }\n        return count;\n    };\n\n\n    /**\n       Gets subscriptions by the topic\n     * @function\n     * @public\n     * @alias getSubscriptions\n    */\n    PubSub.getSubscriptions = function getSubscriptions(topic){\n        var m;\n        var list = [];\n        for (m in messages){\n            if (Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0){\n                list.push(m);\n            }\n        }\n        return list;\n    };\n\n    /**\n     * Removes subscriptions\n     *\n     * - When passed a token, removes a specific subscription.\n     *\n\t * - When passed a function, removes all subscriptions for that function\n     *\n\t * - When passed a topic, removes all subscriptions for that topic (hierarchy)\n     * @function\n     * @public\n     * @alias subscribeOnce\n     * @param { String | Function } value A token, function or topic to unsubscribe from\n     * @example // Unsubscribing with a token\n     * var token = PubSub.subscribe('mytopic', myFunc);\n     * PubSub.unsubscribe(token);\n     * @example // Unsubscribing with a function\n     * PubSub.unsubscribe(myFunc);\n     * @example // Unsubscribing from a topic\n     * PubSub.unsubscribe('mytopic');\n     */\n    PubSub.unsubscribe = function(value){\n        var descendantTopicExists = function(topic) {\n                var m;\n                for ( m in messages ){\n                    if ( Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0 ){\n                        // a descendant of the topic exists:\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            isTopic    = typeof value === 'string' && ( Object.prototype.hasOwnProperty.call(messages, value) || descendantTopicExists(value) ),\n            isToken    = !isTopic && typeof value === 'string',\n            isFunction = typeof value === 'function',\n            result = false,\n            m, message, t;\n\n        if (isTopic){\n            PubSub.clearSubscriptions(value);\n            return;\n        }\n\n        for ( m in messages ){\n            if ( Object.prototype.hasOwnProperty.call( messages, m ) ){\n                message = messages[m];\n\n                if ( isToken && message[value] ){\n                    delete message[value];\n                    result = value;\n                    // tokens are unique, so we can just stop here\n                    break;\n                }\n\n                if (isFunction) {\n                    for ( t in message ){\n                        if (Object.prototype.hasOwnProperty.call(message, t) && message[t] === value){\n                            delete message[t];\n                            result = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n}));\n"],"sourceRoot":""}