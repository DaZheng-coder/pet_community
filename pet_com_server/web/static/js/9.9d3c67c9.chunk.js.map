{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","components/Common/SecondCommonDetail/CommonItem/index.jsx","components/Common/SecondCommonDetail/index.jsx","components/Common/index.jsx","pages/DynamicDetail/index.jsx","components/NavBar/index.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/Button/index.jsx","../node_modules/webpack/buildin/module.js","../node_modules/pubsub-js/src/pubsub.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/nanoid/index.browser.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","CommonItem","state","isGood","props","good","includes","app_user","_id","goods","isPopup","handleCommonClick","stopPropagation","isShowPopup","setState","handleGoodClick","apiCommonGood","then","res","console","log","data","toString","handleSendClick","body","user_id","text","textarea","parent","apiCommonCreate","common","commonInfo","createdAt","dynamic","content","reply_common_user","send_common_user","user","updateCommonList","this","className","Avatar","size","username","onClick","style","wordBreak","Popup","popout","ref","c","name","id","cols","rows","placeholder","Component","connect","SecondCommonDetail","commonList","activeId","computedResponseCommon","newCommonList","push","replyComm","comm","secComm","scrollTo","clientHeight","apiCommonSecondDetail","common_id","map","Common","secondCommon","commonIsPopup","handleSecCommonClick","isShowCommonPopup","addSecondCommon","secCommon","secCommonList","slice","getIsShowPopup","DynamicItem","isDetail","isCommon","notShowUser","url","avatar","updatedAt","Button","EditCommonBar","dynamic_id","update","SecondCommon","DynamicDetail","dynamicDetail","getDynamicDetail","apiDynamicDetail","match","params","func","handleMoreClick","NavBar","centerSlot","nanoid","rightSlot","commonNum","height","navbar","getHeight","dom","backgroundColor","bgColor","top","noSticky","leftSlot","color","history","goBack","title","withRouter","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","arguments","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_defineProperty","obj","configurable","writable","handleClick","type","children","module","exports","webpackPolyfill","deprecate","paths","get","l","root","factory","PubSub","messages","lastUid","ALL_SUBSCRIBING_MSG","hasKeys","prototype","hasOwnProperty","call","throwException","ex","callSubscriberWithDelayedExceptions","subscriber","message","setTimeout","callSubscriberWithImmediateExceptions","deliverMessage","originalMessage","matchedMessage","immediateExceptions","subscribers","callSubscriber","createDeliveryFunction","topic","String","position","lastIndexOf","substr","hasDirectSubscribersFor","Boolean","messageHasSubscribers","found","publish","sync","deliver","publishSync","subscribe","token","subscribeAll","subscribeOnce","unsubscribe","clearAllSubscriptions","clearSubscriptions","m","indexOf","countSubscriptions","count","getSubscriptions","list","t","descendantTopicExists","isTopic","isToken","isFunction","result","undefined","window","_arrayLikeToArray","arr","len","arr2","_unsupportedIterableToArray","minLen","constructor","from","test","_toConsumableArray","arrayLikeToArray","iter","unsupportedIterableToArray","bytes","crypto","getRandomValues","Uint8Array","byte","toUpperCase"],"mappings":"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","file":"static/js/9.9d3c67c9.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Avatar from '@/components/Avatar'\r\nimport Popup from '@/components/Popup'\r\nimport {apiCommonGood, apiCommonCreate} from '@/api/api'\r\nimport './index.less'\r\n\r\nclass CommonItem extends Component {\r\n  state = {\r\n    isGood: this.props.good.includes(this.props.app_user._id) ? true : false,\r\n    goods: this.props.good.length,\r\n    isPopup: false\r\n  }\r\n\r\n  // 评论\r\n  handleCommonClick = (e) => {\r\n    e.stopPropagation()\r\n    this.isShowPopup(e)\r\n  }\r\n\r\n  isShowPopup = (e) => {\r\n    const {isPopup} = this.state\r\n    this.setState({isPopup: !isPopup})\r\n  }\r\n\r\n  // 点赞\r\n  handleGoodClick = (e) => {\r\n    e.stopPropagation()\r\n    const {_id,app_user} = this.props\r\n    let {goods} = this.state\r\n    apiCommonGood(app_user._id, _id).then(res => {\r\n      console.log('res', res)\r\n      if (res.data.good.includes(app_user._id.toString())) {\r\n        goods--\r\n        this.setState({isGood: false})\r\n      } else {\r\n        goods++\r\n        this.setState({isGood: true})\r\n      }\r\n      this.setState({goods})\r\n    })\r\n  }\r\n\r\n  // 处理点击发送评论的事件\r\n  handleSendClick = (e) => {\r\n    e.stopPropagation()\r\n    const body = {\r\n      user_id: this.props.app_user._id,\r\n      text: this.textarea.value,\r\n      parent: this.props._id\r\n    }\r\n    apiCommonCreate(body).then(res => {\r\n      this.textarea.value = ''\r\n      // 调用common组件添加次级评论\r\n      // this.props.addSecondCommon(res.data)\r\n      console.log('res.data', res.data)\r\n      const common = res.data\r\n      const commonInfo = {\r\n        _id: common._id,\r\n        createdAt: common.dynamic.content.createdAt,\r\n        reply_common_user: this.props.send_common_user,\r\n        send_common_user: common.user,\r\n        text: common.dynamic.content.text,\r\n        good: common.dynamic.content.good\r\n      }\r\n      this.props.updateCommonList(commonInfo)\r\n      this.isShowPopup(e)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {isGood,goods,isPopup} = this.state\r\n    const {_id,createdAt, reply_common_user,send_common_user,text,good} = this.props\r\n    return (\r\n      <div className={`ci-ctn margin1-t ${this.props.className}`}>\r\n        <div className=\"flex\">\r\n          <Avatar className=\"margin1-r\" size=\"mini\"/>\r\n          <div className=\"flex\">\r\n            <span className=\"font3 font-blue\">{send_common_user.username}</span>\r\n            {reply_common_user && <span className=\"font3 margin1-lr\"> 回复 </span>}\r\n            {reply_common_user && <span className=\"font3 font-blue\">{reply_common_user.username}</span>}\r\n          </div>\r\n        </div>\r\n        <div className=\"ci-ctn-common font25\">\r\n          {text}\r\n        </div>\r\n        <div className=\"ci-ctn-handle font25 flex space-between padding05\">\r\n          <span className=\"font-deep-gray\">{createdAt}</span>\r\n          <div>\r\n            <span onClick={this.handleCommonClick} className=\"margin1-r\">\r\n              <i className=\"iconfont icon-icon-73 margin05-r\" />\r\n              <span style={{wordBreak: 'keep-all'}} className=\"width04 inline-block\">评论</span>\r\n            </span>\r\n            <span onClick={this.handleGoodClick}>  \r\n              <i className={`${isGood ? '' : 'none'} iconfont margin05-r icon-icon-43`} />\r\n              <i className={`${isGood ? 'none' : ''} iconfont margin05-r icon-icon-42`} />\r\n              <span className=\"width04 inline-block\">{goods}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <Popup isPopup={isPopup} popout={this.isShowPopup}>\r\n          <div className=\"bg popup-content padding1\">\r\n            <div className=\"popup-content-header flex\">\r\n              <span onClick={this.isShowPopup} className=\"popup-content-header-cancel\">取消</span>\r\n              <span className=\"font3 font-bold\">评论</span>\r\n              <span onClick={this.handleSendClick} className=\"font-blue\">发送</span>\r\n            </div>\r\n            <div>\r\n              <textarea ref={c => this.textarea = c} name=\"common\" id=\"common\" cols=\"30\" rows=\"10\" placeholder=\"请输入您评论的内容~\"></textarea>\r\n            </div>\r\n          </div>\r\n        </Popup>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(CommonItem)","import React, { Component } from 'react'\r\nimport CommonItem from './CommonItem'\r\nimport {apiCommonSecondDetail} from '@/api/api'\r\nimport './index.less'\r\n\r\nexport default class SecondCommonDetail extends Component {\r\n  state = {\r\n    commonList: [],\r\n    activeId: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    apiCommonSecondDetail(this.props.common_id).then(res => {\r\n      this.computedResponseCommon(res.data)\r\n    })\r\n  }\r\n\r\n  // 处理请求结果\r\n  computedResponseCommon = (common) => {\r\n    const {commonList} = this.state\r\n    const newCommonList = [...commonList]\r\n    newCommonList.push(common)\r\n    this.setState({commonList:newCommonList})\r\n    if (common.replyComm.length > 0) {\r\n      for (let comm of common.replyComm) {\r\n        console.log('开始计算')\r\n        this.computedResponseCommon(comm)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 更新用户信息\r\n  updateCommonList = (common) => {\r\n    const {commonList} = this.state\r\n    this.setState({commonList: [...commonList, common]})\r\n    this.setState({activeId: common._id})\r\n    this.secComm.scrollTo(0, this.secComm.clientHeight)\r\n  }\r\n\r\n  render() {\r\n    console.log('传进来的id',this.props.common_id)\r\n    const {commonList,activeId} = this.state\r\n    return (\r\n      <div ref={c => this.secComm = c} className=\"scd-ctn bg\">\r\n        {\r\n          commonList.length > 0 && commonList.map(common => \r\n            <CommonItem className={common._id == activeId ? 'active-animate' : ''} key={common._id} {...common} updateCommonList={this.updateCommonList}/>)\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component, Fragment } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Avatar from '@/components/Avatar'\r\nimport Popup from '@/components/Popup'\r\nimport Button from '@/components/Button'\r\nimport EditCommonBar from '@/components/EditCommonBar'\r\nimport DynamicItem from '@/components/DynamicItem'\r\nimport SecondCommonDetail from './SecondCommonDetail'\r\nimport './index.less'\r\n\r\nclass Common extends Component {\r\n  state = {\r\n    secondCommon: true,\r\n    isPopup: this.props.isPopup,\r\n    commonIsPopup: false,\r\n    commonList: this.props.commonList,\r\n    common_id: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 把是否显示popup方法传给父组件\r\n    this.props.getIsShowPopup && this.props.getIsShowPopup(this.isShowPopup)\r\n  }\r\n\r\n  // 处理点击评论区的评论的事件，显示二级评论详细信息\r\n  handleSecCommonClick = (e,common_id) => {\r\n    e.stopPropagation()\r\n    this.setState({common_id})\r\n    this.isShowCommonPopup(e)\r\n  }\r\n\r\n  // 更新评论列表\r\n  updateCommonList = (common) => {\r\n    const {commonList} = this.state\r\n    this.setState({commonList: [common,...commonList]})\r\n  }\r\n\r\n  // 是否显示popup\r\n  isShowPopup = (e) => {\r\n    e.stopPropagation()\r\n    const {isPopup} = this.state\r\n    this.setState({isPopup: !isPopup})\r\n  }\r\n\r\n  // 是否显示次级评论区\r\n  isShowCommonPopup = (e) => {\r\n    e.stopPropagation()\r\n    const {commonIsPopup} = this.state\r\n    this.setState({commonIsPopup: !commonIsPopup})\r\n  }\r\n\r\n  // 添加次级评论\r\n  addSecondCommon = (secCommon) => {\r\n    const {commonList} = this.state\r\n    // 找到添加评论后的那条评论\r\n    const newCommonList = commonList.map(common => {\r\n      if (common._id === secCommon.dynamic.content.parent) {\r\n        const secCommonList = common.secCommonList\r\n        if (common.secCommonList.length > 0) {\r\n          common.secCommonList = [secCommon, ...secCommonList].slice(0,3)\r\n        } else {\r\n          common.secCommonList.push(secCommon)\r\n        }\r\n        return common\r\n      } else {\r\n        return common\r\n      }\r\n    })\r\n    this.setState({commonList: newCommonList})\r\n  }\r\n\r\n  render() {\r\n    const {isPopup,commonList,commonIsPopup,common_id} = this.state\r\n    return (\r\n      <Fragment>\r\n        <div>\r\n          {commonList && commonList.length > 0 ? commonList.map(common => <DynamicItem \r\n            key={common._id}\r\n            addSecondCommon={this.addSecondCommon}\r\n            isDetail isCommon notShowUser {...common}>\r\n            <div className=\"flex\">\r\n              <div className=\"margin1-r\"><Avatar size=\"mini\" url={common.user.avatar} _id={common.user._id}/></div>\r\n              <div className=\"flex flex1 flex-column\">\r\n                <div className=\"common-header flex\">\r\n                  <div>\r\n                    <div className=\"font25\">{common && common.user.username}</div>\r\n                    <div className=\"font-gray\">{common && common.dynamic.content.updatedAt}</div>\r\n                  </div>\r\n                  <i className=\"iconfont icon-icon-47\" onClick={this.isShowPopup}></i>\r\n                </div>\r\n                <div onClick={(e) => this.handleSecCommonClick(e,common._id)} className=\"common-content margin1-t\">\r\n                  <span>{common.dynamic.content.text}</span>\r\n                  {\r\n                    common && common.secCommonList && common.secCommonList.slice(0,2).map(secCommon => \r\n                        <SecondCommon key={secCommon._id} {...secCommon}/>\r\n                    )\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </DynamicItem>) : \r\n          <span className=\"padding1 font25 flex-center\">评论区空空的，点击下方添加评论吧</span>}\r\n          <Popup isPopup={isPopup} popout={this.isShowPopup}>\r\n            <div className=\"padding1 transparent\">\r\n              {/* {\r\n                this.props.app_user._id == this.state.common.user._id && <Button className=\"radius-mini font25\" type=\"danger\">删除</Button>\r\n              } */}\r\n              <Button className=\"bg-gray radius-mini font25 margin1-t\" onClick={this.isShowPopup}>举报</Button>\r\n              <Button onClick={this.isShowPopup} className=\"margin1-t radius-mini font25 font-bold\">取消</Button>\r\n            </div>\r\n          </Popup>\r\n          {/* 次级评论区 */}\r\n          <Popup isPopup={commonIsPopup} popout={this.isShowCommonPopup}>\r\n            {common_id !==0 && <SecondCommonDetail common_id={common_id}/>}\r\n          </Popup>\r\n        </div>\r\n        <EditCommonBar dynamic_id={this.props.dynamic_id} update={this.updateCommonList}/>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(Common)\r\n\r\nclass SecondCommon extends Component {\r\n  render() {\r\n    const {dynamic, user} = this.props\r\n    return (\r\n      <div className=\"margin1-t second-common padding1 flex bg-gray\">\r\n        <a className=\"font-blue\">{user.username}</a>\r\n        <span>: {dynamic.content.text}</span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport NavBar from '@/components/NavBar'\r\nimport Avatar from '@/components/Avatar'\r\nimport DynamicItem from '@/components/DynamicItem'\r\nimport {apiDynamicDetail} from '@/api/api'\r\nimport {nanoid} from 'nanoid'\r\nimport Common from '@/components/Common'\r\n// import PubSub from 'pubsub-js'\r\nimport './index.less'\r\n\r\nexport default class DynamicDetail extends Component {\r\n  state = {\r\n    dynamicDetail: {},\r\n    user: {}\r\n  }\r\n  \r\n  componentDidMount () {\r\n    this.getDynamicDetail()\r\n  }\r\n\r\n  // 获取动态详情\r\n  getDynamicDetail = () => {\r\n    apiDynamicDetail(this.props.match.params.id).then(res => {\r\n      this.setState({dynamicDetail: res.data})\r\n      this.setState({user: res.data.user})\r\n    })\r\n  }\r\n\r\n  // 从子组件中获取子组件的popup方法\r\n  getIsShowPopup = (func) => {\r\n    this.isShowPopup = func\r\n  }\r\n\r\n  // 处理导航栏更多按钮点击事件\r\n  handleMoreClick = (e) => {\r\n    this.isShowPopup(e)\r\n  }\r\n  render() {\r\n    const {\r\n      dynamic,\r\n      commonList\r\n    } = this.state.dynamicDetail\r\n    const {user} = this.state\r\n    return (\r\n      <div className=\"router-view\">\r\n        <NavBar \r\n          centerSlot={\r\n            <div className=\"nav-user-info flex\">\r\n              <Avatar key={nanoid()} className=\"margin05-r\" size=\"mini\" url={user.avatar} _id={user._id}/>\r\n              <span>{user.username}</span>\r\n            </div>\r\n          }\r\n          rightSlot={\r\n            <i className=\"iconfont icon-icon-47\" onClick={this.handleMoreClick}/>\r\n          } \r\n        />\r\n        <div className=\"bg padding1-lr\">\r\n          {dynamic && <DynamicItem isDetail notShowUser {...dynamic}>\r\n            <div className=\"font-deep-gray margin1-t\">{dynamic.content.updatedAt}</div>\r\n          </DynamicItem>}\r\n        </div>\r\n        <div className=\"padding1 font-deep-gray\">共 {dynamic && dynamic.commonNum} 条评论</div>\r\n        <div className=\"padding1-lr bg\">\r\n          {dynamic && <Common dynamic_id={dynamic._id} commonList={commonList} getIsShowPopup={this.getIsShowPopup}/>}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport './index.less'\r\n\r\nclass NavBar extends Component {\r\n  state = {\r\n    height: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    const height = this.navbar.clientHeight\r\n    this.setState({height})\r\n    // 如果父元素想获取该组件的高度，就发送给他\r\n    this.props.getHeight && this.props.getHeight(height)\r\n  }\r\n\r\n  render() {\r\n    console.log('this.props.style', this.props.style)\r\n    return (\r\n      <div ref={dom => this.navbar = dom} style={this.props.style || {backgroundColor: this.props.bgColor || '#FFF', top: 0}} className={`navbar-container padding1 flex ${this.props.className} ${this.props.noSticky || 'sticky'}`}>\r\n        <div>\r\n          {(typeof this.props.leftSlot === 'boolean' ) || this.props.leftSlot || <i className=\"iconfont icon-icon-63 line-center\" style={{color: this.props.color}} onClick={() => this.props.history.goBack()} />}\r\n        </div>\r\n        <div className=\"flex1 text-center margin1-lr\">\r\n          {this.props.centerSlot || <span className=\"font3 font-bold\" style={{color: this.props.color}}>{this.props.title}</span>}\r\n        </div>\r\n        <div className=\"navbar-container-right\">\r\n          {this.props.rightSlot || ''}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(NavBar)","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class Button extends Component {\r\n  handleClick = (e) => {\r\n    e.stopPropagation()\r\n    if (this.props.type !== 'useless') {\r\n      this.props.onClick(e)\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div \r\n        onClick={this.handleClick} \r\n        style={this.props.style}\r\n        className={`my-button ${this.props.type || 'default'} ${this.props.className}`}\r\n      >{this.props.title || this.props.children}</div>\r\n    )\r\n  }\r\n}\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\n * Copyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk\n * License: MIT - http://mrgnrdrck.mit-license.org\n *\n * https://github.com/mroderick/PubSubJS\n */\n\n(function (root, factory){\n    'use strict';\n\n    var PubSub = {};\n    root.PubSub = PubSub;\n    factory(PubSub);\n    // CommonJS and Node.js module support\n    if (typeof exports === 'object'){\n        if (module !== undefined && module.exports) {\n            exports = module.exports = PubSub; // Node.js specific `module.exports`\n        }\n        exports.PubSub = PubSub; // CommonJS module 1.1.1 spec\n        module.exports = exports = PubSub; // CommonJS\n    }\n    // AMD support\n    /* eslint-disable no-undef */\n    else if (typeof define === 'function' && define.amd){\n        define(function() { return PubSub; });\n        /* eslint-enable no-undef */\n    }\n\n}(( typeof window === 'object' && window ) || this, function (PubSub){\n    'use strict';\n\n    var messages = {},\n        lastUid = -1,\n        ALL_SUBSCRIBING_MSG = '*';\n\n    function hasKeys(obj){\n        var key;\n\n        for (key in obj){\n            if ( Object.prototype.hasOwnProperty.call(obj, key) ){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns a function that throws the passed exception, for use as argument for setTimeout\n     * @alias throwException\n     * @function\n     * @param { Object } ex An Error object\n     */\n    function throwException( ex ){\n        return function reThrowException(){\n            throw ex;\n        };\n    }\n\n    function callSubscriberWithDelayedExceptions( subscriber, message, data ){\n        try {\n            subscriber( message, data );\n        } catch( ex ){\n            setTimeout( throwException( ex ), 0);\n        }\n    }\n\n    function callSubscriberWithImmediateExceptions( subscriber, message, data ){\n        subscriber( message, data );\n    }\n\n    function deliverMessage( originalMessage, matchedMessage, data, immediateExceptions ){\n        var subscribers = messages[matchedMessage],\n            callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions,\n            s;\n\n        if ( !Object.prototype.hasOwnProperty.call( messages, matchedMessage ) ) {\n            return;\n        }\n\n        for (s in subscribers){\n            if ( Object.prototype.hasOwnProperty.call(subscribers, s)){\n                callSubscriber( subscribers[s], originalMessage, data );\n            }\n        }\n    }\n\n    function createDeliveryFunction( message, data, immediateExceptions ){\n        return function deliverNamespaced(){\n            var topic = String( message ),\n                position = topic.lastIndexOf( '.' );\n\n            // deliver the message as it is now\n            deliverMessage(message, message, data, immediateExceptions);\n\n            // trim the hierarchy and deliver message to each level\n            while( position !== -1 ){\n                topic = topic.substr( 0, position );\n                position = topic.lastIndexOf('.');\n                deliverMessage( message, topic, data, immediateExceptions );\n            }\n\n            deliverMessage(message, ALL_SUBSCRIBING_MSG, data, immediateExceptions);\n        };\n    }\n\n    function hasDirectSubscribersFor( message ) {\n        var topic = String( message ),\n            found = Boolean(Object.prototype.hasOwnProperty.call( messages, topic ) && hasKeys(messages[topic]));\n\n        return found;\n    }\n\n    function messageHasSubscribers( message ){\n        var topic = String( message ),\n            found = hasDirectSubscribersFor(topic) || hasDirectSubscribersFor(ALL_SUBSCRIBING_MSG),\n            position = topic.lastIndexOf( '.' );\n\n        while ( !found && position !== -1 ){\n            topic = topic.substr( 0, position );\n            position = topic.lastIndexOf( '.' );\n            found = hasDirectSubscribersFor(topic);\n        }\n\n        return found;\n    }\n\n    function publish( message, data, sync, immediateExceptions ){\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        var deliver = createDeliveryFunction( message, data, immediateExceptions ),\n            hasSubscribers = messageHasSubscribers( message );\n\n        if ( !hasSubscribers ){\n            return false;\n        }\n\n        if ( sync === true ){\n            deliver();\n        } else {\n            setTimeout( deliver, 0 );\n        }\n        return true;\n    }\n\n    /**\n     * Publishes the message, passing the data to it's subscribers\n     * @function\n     * @alias publish\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publish = function( message, data ){\n        return publish( message, data, false, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Publishes the message synchronously, passing the data to it's subscribers\n     * @function\n     * @alias publishSync\n     * @param { String } message The message to publish\n     * @param {} data The data to pass to subscribers\n     * @return { Boolean }\n     */\n    PubSub.publishSync = function( message, data ){\n        return publish( message, data, true, PubSub.immediateExceptions );\n    };\n\n    /**\n     * Subscribes the passed function to the passed message. Every returned token is unique and should be stored if you need to unsubscribe\n     * @function\n     * @alias subscribe\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { String }\n     */\n    PubSub.subscribe = function( message, func ){\n        if ( typeof func !== 'function'){\n            return false;\n        }\n\n        message = (typeof message === 'symbol') ? message.toString() : message;\n\n        // message is not registered yet\n        if ( !Object.prototype.hasOwnProperty.call( messages, message ) ){\n            messages[message] = {};\n        }\n\n        // forcing token as String, to allow for future expansions without breaking usage\n        // and allow for easy use as key names for the 'messages' object\n        var token = 'uid_' + String(++lastUid);\n        messages[message][token] = func;\n\n        // return token for unsubscribing\n        return token;\n    };\n\n    PubSub.subscribeAll = function( func ){\n        return PubSub.subscribe(ALL_SUBSCRIBING_MSG, func);\n    };\n\n    /**\n     * Subscribes the passed function to the passed message once\n     * @function\n     * @alias subscribeOnce\n     * @param { String } message The message to subscribe to\n     * @param { Function } func The function to call when a new message is published\n     * @return { PubSub }\n     */\n    PubSub.subscribeOnce = function( message, func ){\n        var token = PubSub.subscribe( message, function(){\n            // before func apply, unsubscribe message\n            PubSub.unsubscribe( token );\n            func.apply( this, arguments );\n        });\n        return PubSub;\n    };\n\n    /**\n     * Clears all subscriptions\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     */\n    PubSub.clearAllSubscriptions = function clearAllSubscriptions(){\n        messages = {};\n    };\n\n    /**\n     * Clear subscriptions by the topic\n     * @function\n     * @public\n     * @alias clearAllSubscriptions\n     * @return { int }\n     */\n    PubSub.clearSubscriptions = function clearSubscriptions(topic){\n        var m;\n        for (m in messages){\n            if (Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0){\n                delete messages[m];\n            }\n        }\n    };\n\n    /**\n       Count subscriptions by the topic\n     * @function\n     * @public\n     * @alias countSubscriptions\n     * @return { Array }\n    */\n    PubSub.countSubscriptions = function countSubscriptions(topic){\n        var m;\n        var count = 0;\n        for (m in messages){\n            if (Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0){\n                count++;\n            }\n        }\n        return count;\n    };\n\n\n    /**\n       Gets subscriptions by the topic\n     * @function\n     * @public\n     * @alias getSubscriptions\n    */\n    PubSub.getSubscriptions = function getSubscriptions(topic){\n        var m;\n        var list = [];\n        for (m in messages){\n            if (Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0){\n                list.push(m);\n            }\n        }\n        return list;\n    };\n\n    /**\n     * Removes subscriptions\n     *\n     * - When passed a token, removes a specific subscription.\n     *\n\t * - When passed a function, removes all subscriptions for that function\n     *\n\t * - When passed a topic, removes all subscriptions for that topic (hierarchy)\n     * @function\n     * @public\n     * @alias subscribeOnce\n     * @param { String | Function } value A token, function or topic to unsubscribe from\n     * @example // Unsubscribing with a token\n     * var token = PubSub.subscribe('mytopic', myFunc);\n     * PubSub.unsubscribe(token);\n     * @example // Unsubscribing with a function\n     * PubSub.unsubscribe(myFunc);\n     * @example // Unsubscribing from a topic\n     * PubSub.unsubscribe('mytopic');\n     */\n    PubSub.unsubscribe = function(value){\n        var descendantTopicExists = function(topic) {\n                var m;\n                for ( m in messages ){\n                    if ( Object.prototype.hasOwnProperty.call(messages, m) && m.indexOf(topic) === 0 ){\n                        // a descendant of the topic exists:\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            isTopic    = typeof value === 'string' && ( Object.prototype.hasOwnProperty.call(messages, value) || descendantTopicExists(value) ),\n            isToken    = !isTopic && typeof value === 'string',\n            isFunction = typeof value === 'function',\n            result = false,\n            m, message, t;\n\n        if (isTopic){\n            PubSub.clearSubscriptions(value);\n            return;\n        }\n\n        for ( m in messages ){\n            if ( Object.prototype.hasOwnProperty.call( messages, m ) ){\n                message = messages[m];\n\n                if ( isToken && message[value] ){\n                    delete message[value];\n                    result = value;\n                    // tokens are unique, so we can just stop here\n                    break;\n                }\n\n                if (isFunction) {\n                    for ( t in message ){\n                        if (Object.prototype.hasOwnProperty.call(message, t) && message[t] === value){\n                            delete message[t];\n                            result = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n}));\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nimport { urlAlphabet } from './url-alphabet/index.js'\n\nif (process.env.NODE_ENV !== 'production') {\n  // All bundlers will remove this block in the production bundle.\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID. If you use Expo, install `expo-random` ' +\n        'and use `nanoid/async`.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\n\nlet customRandom = (alphabet, size, getRandom) => {\n  // First, a bitmask is necessary to generate the ID. The bitmask makes bytes\n  // values closer to the alphabet size. The bitmask calculates the closest\n  // `2^31 - 1` number, which exceeds the alphabet size.\n  // For example, the bitmask for the alphabet size 30 is 31 (00011111).\n  // `Math.clz32` is not used, because it is not available in browsers.\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  // Though, the bitmask solution is not perfect since the bytes exceeding\n  // the alphabet size are refused. Therefore, to reliably generate the ID,\n  // the random bytes redundancy has to be satisfied.\n\n  // Note: every hardware random generator call is performance expensive,\n  // because the system call for entropy collection takes a lot of time.\n  // So, to avoid additional system calls, extra bytes are requested in advance.\n\n  // Next, a step determines how many random bytes to generate.\n  // The number of random bytes gets decided upon the ID size, mask,\n  // alphabet size, and magic number 1.6 (using 1.6 peaks at performance\n  // according to benchmarks).\n\n  // `-~f => Math.ceil(f)` if f is a float\n  // `-~i => i + 1` if i is an integer\n  let step = -~((1.6 * mask * size) / alphabet.length)\n\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      // A compact alternative for `for (var i = 0; i < step; i++)`.\n      let j = step\n      while (j--) {\n        // Adding `|| ''` refuses a random byte that exceeds the alphabet size.\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\n\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  while (size--) {\n    // It is incorrect to use bytes exceeding the alphabet size.\n    // The following mask reduces the random byte in the 0-255 value\n    // range to the 0-63 value range. Therefore, adding hacks, such\n    // as empty string fallback or magic numbers, is unneccessary because\n    // the bitmask trims bytes down to the alphabet size.\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      // `0-9a-z`\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      // `A-Z`\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n"],"sourceRoot":""}