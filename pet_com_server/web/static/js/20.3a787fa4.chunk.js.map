{"version":3,"sources":["components/RightDelete/index.jsx","pages/MyCommon/index.jsx","api/index.js","api/api.js","components/NavBar/index.jsx"],"names":["RightDelete","onClick","this","props","className","isCheckbox","type","children","onDeleteClick","Component","MyCommon","state","commonList","getCommonList","apiCommonMyList","app_user","_id","then","res","console","log","setState","data","handleDelete","e","stopPropagation","apiCommonDelete","title","map","common","text","updatedAt","good","length","connect","user","service","axios","create","baseURL","interceptors","request","use","config","token","localStorageGet","headers","Authorization","error","Promise","reject","response","code","window","alert","msg","apiCategories","get","apiCommodities","category","page","apiCommodity","apiUserDetail","user_id","apiUserListSome","apiRegister","body","post","apiUserUpdate","put","apiLogin","apiFollow","app_user_id","follow_user_id","apiCartList","apiUpdateCartList","apiCartAddCommodity","apiAddressList","apiAddAddress","apiDeleteAddress","delete","apiAddOrder","apiDynamicCreate","apiDynamicList","apiDynamicGood","dynamic_id","apiDynamicDetail","apiDynamicMyList","apiCommonCreate","apiCommonGood","common_id","apiCommonSecondDetail","NavBar","height","navbar","clientHeight","getHeight","style","ref","dom","backgroundColor","bgColor","top","noSticky","leftSlot","color","history","goBack","centerSlot","rightSlot","withRouter"],"mappings":"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","file":"static/js/20.3a787fa4.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './index.less'\r\n\r\nexport default class RightDelete extends Component {\r\n  render() {\r\n    return (\r\n      <div onClick={this.props.onClick} className={`rd-container ${this.props.className}`}>\r\n        <div className=\"rd\">\r\n          <div className=\"rd-left\">\r\n            <div className={`rd-input ${this.props.isCheckbox ? '' : 'vhidden'}`}>\r\n              <input type=\"checkbox\"/>\r\n            </div>\r\n            <div className=\"rd-content\">\r\n              {this.props.children}\r\n            </div>\r\n          </div>\r\n          <div onClick={this.props.onDeleteClick} className=\"rd-right\">\r\n            <i className=\"iconfont icon-icon-17\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport NavBar from '@/components/NavBar'\r\nimport RightDelete from '@/components/RightDelete'\r\nimport {apiCommonMyList,apiCommonDelete} from '@/api/api'\r\nimport './index.less'\r\n\r\nclass MyCommon extends Component {\r\n\r\n  state = {\r\n    commonList: []\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.getCommonList()\r\n  }\r\n\r\n  // 获取评论\r\n  getCommonList = () => {\r\n    apiCommonMyList(this.props.app_user._id).then(res => {\r\n      console.log('获取个人评论列表成功', res)\r\n      this.setState({commonList: res.data})\r\n    })\r\n  }\r\n\r\n  // 删除评论\r\n  handleDelete = (e, _id) => {\r\n    e.stopPropagation()\r\n    apiCommonDelete(_id).then(res => {\r\n      console.log('删除评论成功呢', res)\r\n      this.getCommonList()\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {commonList} = this.state\r\n    return (\r\n      <div>\r\n        <NavBar title=\"我的评论\" />\r\n        <div className=\"padding1\">*左滑即可删除</div>\r\n        <div>\r\n          {\r\n            commonList && commonList.map(common => <RightDelete\r\n              className=\"margin1-tb\"\r\n              key={common._id}\r\n              onDeleteClick={(e) => this.handleDelete(e, common._id)}\r\n            >\r\n              <div className=\"common-item bg flex\">\r\n                <div className=\"common-item-content\">\r\n                  {common.text}\r\n                </div>\r\n                <div className=\"common-item-text\">\r\n                  <span>{common.updatedAt}</span>\r\n                  <span>赞数: {common.good.length}</span>\r\n                </div>\r\n              </div>\r\n            </RightDelete>)\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(state => ({app_user: state.user}))(MyCommon)","// 封装axios\r\nimport axios from 'axios'\r\nimport QS from 'qs'\r\nimport {localStorageGet}  from '@/utils'\r\n\r\n//保存环境变量\r\nconst isPrd = process.env.NODE_ENV == 'production';\r\n//区分开发环境还是生产环境基础URL\r\nexport const basicUrl = isPrd ? 'http://生产环境:3000/web/api' : 'http://localhost:3000/web/api'\r\n\r\n// 设置axios基本路径\r\nconst service = axios.create({\r\n  baseURL: basicUrl\r\n})\r\n\r\n// 请求拦截器\r\nservice.interceptors.request.use(config => { \r\n  const token = localStorageGet('userToken')\r\n  // 在每次的请求中添加token\r\n  // config.data = Object.assign({}, config.data, {\r\n  //   token: token,\r\n  // })\r\n  if (token) {\r\n    console.log('有token，设置token1', token)\r\n    config.headers.Authorization = 'Bearer ' + token\r\n  }\r\n  // 设置请求头\r\n  // config.headers = {\r\n  //   'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'\r\n  // }\r\n  // config.data = QS.stringify(config.data)\r\n  return config\r\n}, error => { \r\n  return Promise.reject(error);\r\n})\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(response => {\r\n  //根据返回不同的状态码做不同的事情\r\n  // 这里一定要和后台开发人员协商好统一的错误状态码\r\n  if (response.code) {\r\n    switch (response.code) {\r\n      case 200:\r\n        return response.data;\r\n      case 401:\r\n        //未登录处理方法\r\n        console.log('用户未登录')\r\n        break;\r\n      case 403:\r\n        //token过期处理方法\r\n        console.log('用户token过期')\r\n        break;\r\n      default:\r\n        // 发送错误消息\r\n        // message.error(response.data.msg)\r\n        window.alert('错误消息', response.data.msg)\r\n        console.log('错误消息', response.data.msg)\r\n    }\r\n  } else { \r\n    return response;\r\n  }\r\n})\r\n//最后把封装好的axios导出\r\nexport default service\r\n","// 统一管理接口\r\nimport service from './index'\r\n\r\n// 获取上级分类为商品的分类\r\nexport const apiCategories = () => service.get('/categories/commodity')\r\n// 获取上级分类为category的商品列表\r\nexport const apiCommodities = (category,page) => service.get(`/commodities/${category}/${page}`)\r\n// 根据id获取商品信息\r\nexport const apiCommodity = (_id) => service.get(`/commodity/${_id}`)\r\n\r\n// 获取用户详细信息\r\nexport const apiUserDetail = (user_id) => service.get(`/user/detail/${user_id}`)\r\n// 获取一些用户\r\nexport const apiUserListSome = () => service.get('/user/list/some')\r\n// 注册用户\r\nexport const apiRegister = (body) => service.post('/register', body)\r\n// 更新用户信息\r\nexport const apiUserUpdate = (user_id,body) => service.put(`/user/update/${user_id}`, body)\r\n// 登录\r\nexport const apiLogin = (body) => service.post('/login', body)\r\n// 查看是否有用户名\r\nexport const apiIsExistUsername = (body) => service.get('/isExistUsername', body)\r\n// 关注\r\nexport const apiFollow = (app_user_id, follow_user_id) => service.get(`/user/follow/add/${app_user_id}/${follow_user_id}`)\r\n\r\n// 获取购物车列表，传入的id是用户id\r\nexport const apiCartList = (_id) => service.get(`/cart/list/${_id}`)\r\n// 更新购物车列表，传入的id是用户id\r\nexport const apiUpdateCartList = (_id,body) => service.put(`/cart/list/update/${_id}`, body)\r\n// 将商品添加到购物车列表，id为用户id，body传入商品_id\r\nexport const apiCartAddCommodity = (_id, body) => service.post(`/cart/list/add/${_id}`, body)\r\n\r\n// 获取地址列表 id为用户id\r\nexport const apiAddressList = (_id) => service.get(`/address/list/${_id}`)\r\n// 添加地址\r\nexport const apiAddAddress = (body) => service.post('/address/create', body)\r\n// 删除地址，传入的是地址的id\r\nexport const apiDeleteAddress = (_id) => service.delete(`address/delete/${_id}`)\r\n\r\n// 获取订单列表，id为用户id\r\nexport const apiOrderList = (_id) => service.get(`/order/list/${_id}`)\r\n// 创建添加订单\r\nexport const apiAddOrder = (body) => service.post('/order/create', body)\r\n\r\n// 创建动态\r\nexport const apiDynamicCreate = (body) => service.post('/dynamic/create', body)\r\n// 获取动态列表，body为查询条件\r\nexport const apiDynamicList = (page) => service.get(`/dynamic/list/${page}`)\r\n// 更新动态点赞\r\nexport const apiDynamicGood = (dynamic_id, user_id) => service.get(`/dynamic/good/${dynamic_id}/${user_id}`)\r\n// 获取单个动态的详细信息\r\nexport const apiDynamicDetail = (dynamic_id) => service.get(`/dynamic/detail/${dynamic_id}`)\r\n// 获取个人动态列表\r\nexport const apiDynamicMyList = (user_id) => service.get(`dynamic/my/list/${user_id}`)\r\n\r\n// 创建评论\r\nexport const apiCommonCreate = (body) => service.post('/common/create', body)\r\n// 评论点赞\r\nexport const apiCommonGood = (user_id, common_id) => service.get(`/common/good/${user_id}/${common_id}`)\r\n// 获取次级评论详情\r\nexport const apiCommonSecondDetail = (common_id) => service.get(`/common/second/detail/${common_id}`)\r\n// 删除评论\r\nexport const apiCommonDelete = (common_id) => service.delete(`/common/delete/${common_id}`)\r\n// 获取个人发布的评论列表\r\nexport const apiCommonMyList = (user_id) => service.get(`/common/my/list/${user_id}`)\r\n\r\n","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport './index.less'\r\n\r\nclass NavBar extends Component {\r\n  state = {\r\n    height: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    const height = this.navbar.clientHeight\r\n    this.setState({height})\r\n    // 如果父元素想获取该组件的高度，就发送给他\r\n    this.props.getHeight && this.props.getHeight(height)\r\n  }\r\n\r\n  render() {\r\n    console.log('this.props.style', this.props.style)\r\n    return (\r\n      <div ref={dom => this.navbar = dom} style={this.props.style || {backgroundColor: this.props.bgColor || '#FFF', top: 0}} className={`navbar-container padding1 flex ${this.props.className} ${this.props.noSticky || 'sticky'}`}>\r\n        <div>\r\n          {(typeof this.props.leftSlot === 'boolean' ) || this.props.leftSlot || <i className=\"iconfont icon-icon-63 line-center\" style={{color: this.props.color}} onClick={() => this.props.history.goBack()} />}\r\n        </div>\r\n        <div className=\"flex1 text-center margin1-lr\">\r\n          {this.props.centerSlot || <span className=\"font3 font-bold\" style={{color: this.props.color}}>{this.props.title}</span>}\r\n        </div>\r\n        <div className=\"navbar-container-right\">\r\n          {this.props.rightSlot || ''}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(NavBar)"],"sourceRoot":""}